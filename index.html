<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VABUUK — Sanctuary (Single-Page)</title>

    <!-- Core Engine -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;700&family=Noto+Serif+Bengali:wght@300;500;700&family=Outfit:wght@300;400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
 vabuuk: {
  void: '#0B0F19',
  void_deep: '#05070F',
  paper: '#F3F1EB',
  paper_dim: '#E8E5DB',
  saffron: '#D97706',
  saffron_glow: '#F59E0B',
  cyan: '#22D3EE',
  stone: '#57534E',
  ink: '#1E293B',
  gold: '#C5A059'
 }
},
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        serif: ['Cinzel', 'serif'],
                        bengali: ['Noto Serif Bengali', 'serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'breathe': 'breathe 8s ease-in-out infinite',
                        'fade-in-up': 'fadeInUp 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        breathe: {
                            '0%, 100%': { opacity: '0.8', transform: 'scale(1)' },
                            '50%': { opacity: '1', transform: 'scale(1.02)' },
                        },
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(40px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Outfit', sans-serif; }
        .font-bengali { font-family: 'Noto Serif Bengali', serif; }

        .glass-premium {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .glass-light {
            background: rgba(242, 240, 233, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Cinematic Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0F172A; }
        ::-webkit-scrollbar-thumb { background: #57534E; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #D97706; }

        .text-gradient-gold {
            background: linear-gradient(to right, #F2F0E9, #C5A059, #F2F0E9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shine 5s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }
    </style>
</head>
<body class="bg-vabuuk-void text-vabuuk-paper antialiased selection:bg-vabuuk-saffron selection:text-white transition-colors duration-700">
    <div id="root"></div>

    <script type="text/babel">
(function(){

    const { useState, useEffect, useRef } = React;

    // ── DATA ──────────────────────────────────────────────────────────────────

    const MD = {
        preamble: {
            en: {
                label: "PREAMBLE",
                title: "We Are Not a Religion.\nWe Are Not an Ideology.",
                subtitle: "We are a method.",
                body: "In a world drowning in noise — algorithmic feeds, tribal certainties, and borrowed beliefs — VABUUK stands as a bridge. Not between left and right. Not between theist and atheist. But between the mind that questions and the heart that seeks. We do not offer answers. We offer better questions.",
                pull: "\"The unexamined life is not worth living.\" We add: the unlived logic is not worth examining.",
            },
            bn: {
                label: "প্রস্তাবনা",
                title: "আমরা কোনো ধর্ম নই।\nআমরা কোনো মতবাদও নই।",
                subtitle: "আমরা একটি পদ্ধতি।",
                body: "এমন একটি পৃথিবীতে যেখানে কোলাহল ডুবিয়ে দিচ্ছে সবকিছু — অ্যালগরিদমের খোরাক, গোষ্ঠীগত নিশ্চিততা, ধার করা বিশ্বাস — VABUUK দাঁড়িয়ে আছে একটি সেতু হিসেবে। বাম ও ডানের মধ্যে নয়। আস্তিক ও নাস্তিকের মধ্যে নয়। বরং প্রশ্নকারী মন আর সন্ধানী হৃদয়ের মধ্যে। আমরা উত্তর দিই না। আমরা ভালো প্রশ্ন শেখাই।",
                pull: "\"অপরীক্ষিত জীবন বাঁচার যোগ্য নয়।\" আমরা যোগ করি: অজীবন্ত যুক্তি পরীক্ষার যোগ্য নয়।",
            }
        },
        tenets: [
            {
                id:"I", icon:"triangle", color:"blue",
                en:{ title:"The Architect Within", sub:"Logic as liberation", body:"We believe empirical logic is not the enemy of faith — it is the skeleton on which meaningful faith must hang. We refuse fuzzy thinking. We demand evidence. We cite sources. But we know that data is not wisdom.", detail:"The Architect represents 70% of our method. Before we conclude, we build. We map the argument. We find the strongest form of every position — including the ones we despise. This is not weakness. This is intellectual courage.", quote:"We do not attack you. We attack the idea. 'বিষয় দা।'" },
                bn:{ title:"ভেতরের স্থপতি", sub:"মুক্তি হিসেবে যুক্তি", body:"আমরা বিশ্বাস করি অভিজ্ঞতামূলক যুক্তি বিশ্বাসের শত্রু নয় — এটি সেই কঙ্কাল যার উপর অর্থবহ বিশ্বাস ঝুলে থাকতে হবে। আমরা অস্পষ্ট চিন্তা প্রত্যাখ্যান করি। আমরা প্রমাণ দাবি করি।", detail:"স্থপতি আমাদের পদ্ধতির ৭০% প্রতিনিধিত্ব করেন। সিদ্ধান্ত নেওয়ার আগে, আমরা নির্মাণ করি। আমরা যুক্তি ম্যাপ করি। আমরা প্রতিটি অবস্থানের সবচেয়ে শক্তিশালী রূপ খুঁজি।", quote:"আমরা আপনাকে আক্রমণ করি না। আমরা ধারণাকে আক্রমণ করি। 'বিষয় দা।'" }
            },
            {
                id:"II", icon:"waves", color:"amber",
                en:{ title:"The Boatman's Grace", sub:"Intuition as intelligence", body:"We believe the human experience cannot be fully reduced to data. There is a territory beyond proof — love, grief, wonder, the sublime — that demands a different kind of navigation. The Boatman does not argue. He listens.", detail:"The Boatman represents 20% of our method — but often the most important 20%. When logic exhausts itself, the Boatman picks up the oar. He does not deny the storm. He steers through it.", quote:"Some truths can only be felt before they can be known." },
                bn:{ title:"মাঝির অনুগ্রহ", sub:"বুদ্ধি হিসেবে অন্তর্দৃষ্টি", body:"আমরা বিশ্বাস করি মানবিক অভিজ্ঞতাকে সম্পূর্ণ তথ্যে হ্রাস করা যায় না। প্রমাণের বাইরে একটি অঞ্চল আছে — ভালোবাসা, দুঃখ, বিস্ময় — যার জন্য ভিন্ন ধরনের নেভিগেশন প্রয়োজন।", detail:"মাঝি আমাদের পদ্ধতির ২০% প্রতিনিধিত্ব করেন — কিন্তু প্রায়ই সবচেয়ে গুরুত্বপূর্ণ ২০%। যখন যুক্তি ক্লান্ত হয়, মাঝি দাঁড় তুলে নেন।", quote:"কিছু সত্য জানার আগে অনুভব করতে হয়।" }
            },
            {
                id:"III", icon:"link-2", color:"emerald",
                en:{ title:"The Bridge Protocol", sub:"Synthesis as the goal", body:"VABUUK is not interested in winning arguments. We are interested in building understanding. The Bridge is the final output — the place where Architect and Boatman meet, where logic becomes actionable wisdom.", detail:"The Steelman Method is our weapon. Before we disagree, we must fully articulate the strongest version of what we oppose. The goal is not to defeat the other position — it is to transcend it.", quote:"The Bridge does not choose sides. It connects them." },
                bn:{ title:"সেতু প্রোটোকল", sub:"সংশ্লেষণই লক্ষ্য", body:"VABUUK যুক্তিতে জেতায় আগ্রহী নয়। আমরা বোঝাপড়া তৈরিতে আগ্রহী। সেতু হলো চূড়ান্ত আউটপুট — যেখানে স্থপতি ও মাঝি মিলিত হন, যেখানে যুক্তি কার্যকর প্রজ্ঞা হয়।", detail:"স্টিলম্যান পদ্ধতি আমাদের সংশ্লেষণের অস্ত্র। বিরোধিতার আগে, বিরোধী অবস্থানের সবচেয়ে শক্তিশালী সংস্করণ বলতে হবে।", quote:"সেতু পক্ষ নেয় না। সে সংযোগ করে।" }
            },
            {
                id:"IV", icon:"shield", color:"rose",
                en:{ title:"The Bishoy Da Shield", sub:"Idea, not individual", body:"We never attack people. We attack ideas. This is not cowardice — it is the highest form of intellectual respect. When we disagree with you, we separate your identity from your argument.", detail:"Ad hominem is the refuge of the intellectually bankrupt. We refuse it absolutely. In every VABUUK dialogue: 'ভাই আমার, যুক্তিটা তো আকাশ থেকে পড়ল না!' — Let us trace this logic together.", quote:"The idea is the opponent. You are the ally we are trying to free." },
                bn:{ title:"বিষয় দা ঢাল", sub:"ধারণা, ব্যক্তি নয়", body:"আমরা কখনো মানুষকে আক্রমণ করি না। আমরা ধারণাকে আক্রমণ করি। এটি কাপুরুষতা নয় — এটি বুদ্ধিবৃত্তিক সম্মানের সর্বোচ্চ রূপ।", detail:"বিশেষণ আক্রমণ বুদ্ধিবৃত্তিকভাবে দেউলিয়াদের আশ্রয়। প্রতিটি VABUUK সংলাপে: 'ভাই আমার, যুক্তিটা তো আকাশ থেকে পড়ল না!' — চলুন একসাথে এই যুক্তির পথ খুঁজি।", quote:"ধারণাটি প্রতিপক্ষ। আপনি সেই মিত্র যাকে আমরা মুক্ত করার চেষ্টা করছি।" }
            },
            {
                id:"V", icon:"brain", color:"purple",
                en:{ title:"Digital Sovereignty", sub:"Reclaiming the attention economy", body:"The modern mind is under siege. Algorithms are designed to capture attention at any cost. We believe attention is the last sovereign territory of the self — and we intend to defend it.", detail:"Digital Stoicism is not about deleting apps. It is about understanding the architecture of the compulsion and rebuilding your relationship with technology from a position of power, not addiction.", quote:"True freedom is not deleting the app. It is deleting the compulsion to open it." },
                bn:{ title:"ডিজিটাল সার্বভৌমত্ব", sub:"মনোযোগ অর্থনীতি পুনরুদ্ধার", body:"আধুনিক মন অবরোধের মধ্যে। অ্যালগরিদম যেকোনো মূল্যে মনোযোগ ক্যাপচার করতে ডিজাইন করা হয়েছে। আমরা বিশ্বাস করি মনোযোগ আত্মার শেষ সার্বভৌম অঞ্চল।", detail:"ডিজিটাল স্টোইসিজম অ্যাপ মুছে ফেলার বিষয়ে নয়। এটি বাধ্যতার স্থাপত্য বোঝা এবং প্রযুক্তির সাথে আপনার সম্পর্ক শক্তির অবস্থান থেকে পুনর্নির্মাণের বিষয়ে।", quote:"সত্যিকারের স্বাধীনতা অ্যাপ মুছে ফেলা নয়। এটি খোলার তাগিদ মুছে ফেলা।" }
            },
            {
                id:"VI", icon:"infinity", color:"gold",
                en:{ title:"The Eternal Question", sub:"Wonder as a discipline", body:"We are not anti-faith. We are anti-unexamined faith. The most profound spiritual traditions — Sufi mysticism, Buddhist inquiry, Stoic contemplation — all question first, then believe. We continue that tradition.", detail:"From Rickshaw pullers to CEOs, the capacity for wonder and rigorous thought is universally human. The goal of VABUUK is not to make you an atheist or a theist. It is to make you a thinker.", quote:"ভাবনায় যুক্তি, বিশ্বাসে মুক্তি। Logic in Thought, Freedom in Belief." },
                bn:{ title:"চিরন্তন প্রশ্ন", sub:"শৃঙ্খলা হিসেবে বিস্ময়", body:"আমরা বিশ্বাস-বিরোধী নই। আমরা অপরীক্ষিত বিশ্বাস-বিরোধী। মানব ইতিহাসের সবচেয়ে গভীর আধ্যাত্মিক ঐতিহ্যগুলি — সুফি রহস্যবাদ, বৌদ্ধ অনুসন্ধান — সবই প্রথমে প্রশ্ন করে, তারপর বিশ্বাস করে।", detail:"রিকশাচালক থেকে সিইও পর্যন্ত, বিস্ময়ের ক্ষমতা সর্বজনীনভাবে মানবিক। VABUUK-এর লক্ষ্য আপনাকে নাস্তিক বা আস্তিক করা নয়। এটি আপনাকে একজন চিন্তাবিদ করা।", quote:"ভাবনায় যুক্তি, বিশ্বাসে মুক্তি।" }
            }
        ],
        declaration: {
            en: {
                title:"We Hereby Declare",
                items:["That the right to question is sacred and inalienable.","That no idea — including ours — is beyond scrutiny.","That compassion and logic are not opposites, but partners.","That the examined life, however difficult, is the only life worth living.","That the Bengali mind — like every human mind — deserves intellectual sovereignty.","That we will never attack the person. Only the argument.","That this is a sanctuary, not a court. You are welcome here."],
                closing:"Signed in thought, sealed in logic, delivered with love."
            },
            bn: {
                title:"আমরা এতদ্বারা ঘোষণা করছি",
                items:["যে প্রশ্ন করার অধিকার পবিত্র এবং অবিচ্ছেদ্য।","যে কোনো ধারণা — আমাদেরটি সহ — যাচাইয়ের বাইরে নয়।","যে সহানুভূতি এবং যুক্তি বিপরীত নয়, বরং সঙ্গী।","যে পরীক্ষিত জীবন, যতই কঠিন হোক, বাঁচার একমাত্র জীবন।","যে বাঙালি মন — প্রতিটি মানবিক মনের মতো — বুদ্ধিবৃত্তিক সার্বভৌমত্বের যোগ্য।","যে আমরা কখনো ব্যক্তিকে আক্রমণ করব না। শুধুমাত্র যুক্তিকে।","যে এটি একটি অভয়ারণ্য, আদালত নয়। আপনাকে এখানে স্বাগত।"],
                closing:"চিন্তায় স্বাক্ষরিত, যুক্তিতে সিলমোহর করা, ভালোবাসায় পরিবেশিত।"
            }
        }
    };

    const T_DATA = {
        en:{ nav_home:"Sanctuary", nav_academy:"Academy", nav_library:"Library", nav_manifesto:"Manifesto", badge_sub:"EST. 2026", reading_time:"8 min read", scroll_label:"SCROLL TO READ", section_tenets:"The Six Tenets", section_tenets_sub:"The intellectual pillars upon which VABUUK stands.", section_declaration:"The Declaration", tenet_expand:"Read more", tenet_collapse:"Collapse", cta_academy:"Enter the Academy", cta_library:"Browse Library", footer_motto:"Logic in Thought, Freedom in Belief.", sign_off:"— The Architect & The Boatman" },
        bn:{ nav_home:"অভয়ারণ্য", nav_academy:"একাডেমি", nav_library:"লাইব্রেরি", nav_manifesto:"ইশতেহার", badge_sub:"প্রতিষ্ঠা ২০২৬", reading_time:"৮ মিনিট পড়া", scroll_label:"পড়তে স্ক্রোল করুন", section_tenets:"ছয়টি নীতি", section_tenets_sub:"বুদ্ধিবৃত্তিক স্তম্ভ যার উপর VABUUK দাঁড়িয়ে।", section_declaration:"ঘোষণাপত্র", tenet_expand:"আরও পড়ুন", tenet_collapse:"সংকুচিত", cta_academy:"একাডেমিতে প্রবেশ", cta_library:"লাইব্রেরি দেখুন", footer_motto:"ভাবনায় যুক্তি, বিশ্বাসে মুক্তি।", sign_off:"— স্থপতি ও মাঝি" }
    };

    const CLR = {
        blue:   {ring:'border-blue-500/30',   dot:'bg-blue-500',   text:'text-blue-400',   bg:'bg-blue-500/10'},
        amber:  {ring:'border-amber-500/30',  dot:'bg-amber-500',  text:'text-amber-400',  bg:'bg-amber-500/10'},
        emerald:{ring:'border-emerald-500/30',dot:'bg-emerald-500',text:'text-emerald-400',bg:'bg-emerald-500/10'},
        rose:   {ring:'border-rose-500/30',   dot:'bg-rose-500',   text:'text-rose-400',   bg:'bg-rose-500/10'},
        purple: {ring:'border-purple-500/30', dot:'bg-purple-500', text:'text-purple-400', bg:'bg-purple-500/10'},
        gold:   {ring:'border-vabuuk-saffron/30',dot:'bg-vabuuk-saffron',text:'text-vabuuk-saffron',bg:'bg-vabuuk-saffron/10'},
    };

    // ── COMPONENTS ────────────────────────────────────────────────────────────

    const Icon = ({ name, size=20, className='', fill='none', strokeWidth=2 }) => {
        const ref = useRef(null);
        useEffect(() => {
            if (ref.current && window.lucide) {
                ref.current.innerHTML = '';
                const n = document.createElement('i');
                n.setAttribute('data-lucide', name);
                n.setAttribute('width', size);
                n.setAttribute('height', size);
                if (fill !== 'none') n.setAttribute('fill', fill);
                n.setAttribute('stroke-width', strokeWidth);
                ref.current.appendChild(n);
                window.lucide.createIcons({ nodes:[n] });
            }
        }, [name, size, fill, strokeWidth]);
        return <span ref={ref} className={`inline-flex items-center justify-center ${className}`} />;
    };

    const Reveal = ({ children, delay=0, className='', direction='up' }) => {
        const ref = useRef(null);
        const [v, setV] = useState(false);
        useEffect(() => {
            const obs = new IntersectionObserver(([e]) => { if(e.isIntersecting){ setV(true); obs.disconnect(); } }, { threshold:0.08, rootMargin:'0px 0px -40px 0px' });
            if (ref.current) obs.observe(ref.current);
            return () => obs.disconnect();
        }, []);
        const xform = direction==='left'?'translate-x-[-30px]':direction==='right'?'translate-x-[30px]':'translate-y-10';
        return (
            <div ref={ref} className={`transition-all duration-700 ${v?'opacity-100 translate-y-0 translate-x-0':`opacity-0 ${xform}`} ${className}`} style={{transitionDelay:`${delay}ms`}}>
                {children}
            </div>
        );
    };

    const InkLine = () => {
        const ref = useRef(null);
        const [r, setR] = useState(false);
        useEffect(() => {
            const obs = new IntersectionObserver(([e]) => { if(e.isIntersecting) setR(true); }, { threshold:0.5 });
            if (ref.current) obs.observe(ref.current);
            return () => obs.disconnect();
        }, []);
        return <div ref={ref} className={`ink-line my-2 ${r?'revealed':''}`} />;
    };

    // ── APP ───────────────────────────────────────────────────────────────────

    function ManifestoView() {
        const [lang, setLang]           = useState('en');
        const [scrollPct, setScrollPct] = useState(0);
        const [isNight, setIsNight]     = useState(true);
        const [scrolled, setScrolled]   = useState(false);
        const [expanded, setExpanded]   = useState(null);
        const [signCount, setSignCount] = useState(4871);
        const [signed, setSigned]       = useState(false);
        const [signName, setSignName]   = useState('');
        const [toast, setToast]         = useState(false);

        const T  = T_DATA[lang];
        const P  = MD.preamble[lang];
        const DC = MD.declaration[lang];

        useEffect(() => {
            const h = new Date().getHours();
            setIsNight(h < 6 || h >= 18);
            const onScroll = () => {
                const el = document.documentElement;
                setScrollPct((el.scrollTop / (el.scrollHeight - el.clientHeight)) * 100);
                setScrolled(window.scrollY > 80);
            };
            window.addEventListener('scroll', onScroll, { passive:true });
            return () => window.removeEventListener('scroll', onScroll);
        }, []);

        useEffect(() => {
            const s = localStorage.getItem('vabuuk_lang');
            if (s) setLang(s);
        }, []);
        useEffect(() => { localStorage.setItem('vabuuk_lang', lang); }, [lang]);

        const handleSign = () => {
            if (!signName.trim()) return;
            setSignCount(c => c+1); setSigned(true);
        };

        const handleShare = () => {
            if (navigator.share) {
                navigator.share({ title:'VABUUK Manifesto', url:window.location.href });
            } else {
                navigator.clipboard.writeText(window.location.href);
                setToast(true); setTimeout(() => setToast(false), 2500);
            }
        };

        const navBg = scrolled
            ? `backdrop-blur-xl ${isNight ? 'bg-vabuuk-void/90 border-white/5' : 'bg-vabuuk-paper/90 border-black/5'}`
            : 'bg-transparent border-transparent';

        return (
            <div className={`min-h-screen transition-colors duration-700 ${isNight ? 'bg-vabuuk-void text-vabuuk-paper' : 'bg-vabuuk-paper text-vabuuk-ink'}`}>

                {/* SCROLL PROGRESS */}
                <div className="scroll-progress" style={{width:`${scrollPct}%`}} />

                {/* AMBIENT */}
                <div className="fixed inset-0 pointer-events-none overflow-hidden z-0">
                    <div className={`absolute top-[-15%] right-[-10%] w-[55vw] h-[55vw] rounded-full blur-[120px] opacity-[0.07] animate-breathe ${isNight?'bg-vabuuk-saffron':'bg-vabuuk-gold'}`} />
                    <div className={`absolute bottom-[-10%] left-[-15%] w-[50vw] h-[50vw] rounded-full blur-[100px] opacity-[0.05] ${isNight?'bg-blue-600':'bg-blue-200'}`} />
                    <div className="absolute inset-0 bg-grain opacity-30 mix-blend-overlay" />
                </div>

                {/* ── NAV ── */}
                <nav className={`fixed top-0 w-full z-50 px-4 md:px-8 py-4 flex justify-between items-center border-b transition-all duration-300 ${navBg}`}>
                    <div className="flex items-center gap-4">
                        <a href="/" className="flex items-center gap-3 group">
                            <div className="w-9 h-9 bg-vabuuk-saffron text-white flex items-center justify-center rounded-lg font-serif font-bold text-lg shadow-[0_0_12px_rgba(217,119,6,0.25)] group-hover:rotate-45 transition-transform duration-500">V</div>
                            <div className="hidden md:block">
                                <h1 className={`font-serif font-bold text-lg tracking-wider uppercase leading-none ${isNight?'text-white':'text-vabuuk-void'}`}>VABUUK</h1>
                                <p className="text-[8px] tracking-[0.3em] uppercase opacity-50 font-mono">{T.badge_sub}</p>
                            </div>
                        </a>
                        <span className={`hidden md:block h-6 w-px ${isNight?'bg-white/10':'bg-black/10'}`} />
                        <div className="hidden md:flex items-center gap-5 text-xs font-medium tracking-wide opacity-60">
                            <a href="/"        className="hover:text-vabuuk-saffron hover:opacity-100 transition">{T.nav_home}</a>
                            <a href="/academy" className="hover:text-vabuuk-saffron hover:opacity-100 transition">{T.nav_academy}</a>
                            <a href="/library" className="hover:text-vabuuk-saffron hover:opacity-100 transition">{T.nav_library}</a>
                            <span className="text-vabuuk-saffron opacity-100 font-bold">{T.nav_manifesto}</span>
                        </div>
                    </div>
                    <div className="flex items-center gap-3">
                        <span className={`hidden md:flex items-center gap-1.5 text-[9px] font-mono uppercase tracking-[0.2em] opacity-40`}>
                            <Icon name="clock" size={11} />{T.reading_time}
                        </span>
                        <button onClick={() => setLang(l => l==='en'?'bn':'en')}
                            className={`w-9 h-9 rounded-full border flex items-center justify-center font-bold text-[10px] transition-all duration-500 hover:rotate-180 hover:border-vabuuk-saffron ${isNight?'border-white/15 opacity-60 hover:opacity-100':'border-black/15 opacity-60 hover:opacity-100'}`}>
                            {lang==='en'?'বাং':'EN'}
                        </button>
                        <button onClick={() => setIsNight(n=>!n)}
                            className={`w-9 h-9 rounded-full border flex items-center justify-center transition-all duration-300 hover:border-vabuuk-saffron ${isNight?'border-white/15 opacity-60 hover:opacity-100':'border-black/15 opacity-60 hover:opacity-100'}`}>
                            <Icon name={isNight?'sun':'moon'} size={15} />
                        </button>
                    </div>
                </nav>

                {/* ══ HERO ═══════════════════════════════════════════════════ */}
                <header className="relative min-h-screen flex flex-col justify-center items-center text-center px-6 pt-20 z-10 overflow-hidden">
                    {/* vertical label */}
                    <div className="absolute left-6 top-1/2 -translate-y-1/2 hidden lg:flex items-center gap-3">
                        <div className={`text-vertical text-[9px] font-mono tracking-[0.3em] opacity-20 uppercase`}>THE CONSTITUTION</div>
                        <div className={`h-32 w-px ${isNight?'bg-white/10':'bg-black/10'}`} />
                    </div>

                    <Reveal>
                        {/* badge */}
                        <div className="flex justify-center mb-8">
                            <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-full border text-[9px] font-mono tracking-[0.25em] uppercase ${isNight?'border-white/10 bg-white/[0.03]':'border-black/10 bg-black/[0.03]'}`}>
                                <span className="w-1.5 h-1.5 rounded-full bg-vabuuk-saffron animate-pulse-slow" />
                                THE CONSTITUTION <span className="opacity-30">|</span> VBK-000
                            </div>
                        </div>

                        {/* Title */}
                        <h1 className={`text-5xl md:text-7xl lg:text-8xl xl:text-[7rem] font-serif font-bold leading-[1.0] mb-6 tracking-tight ${lang==='bn'?'font-bengali':''} text-gradient-saffron`}>
                            {P.title.split('\n').map((line,i) => <span key={i} className="block">{line}</span>)}
                        </h1>

                        {/* subtitle */}
                        <p className={`text-xl md:text-2xl font-serif italic mb-8 opacity-60 ${lang==='bn'?'font-bengali':''}`}>{P.subtitle}</p>

                        {/* divider */}
                        <div className="flex items-center justify-center gap-4 mb-10">
                            <div className={`h-px w-16 ${isNight?'bg-white/20':'bg-black/20'}`} />
                            <div className="w-2 h-2 rounded-full bg-vabuuk-saffron" />
                            <div className={`h-px w-16 ${isNight?'bg-white/20':'bg-black/20'}`} />
                        </div>

                        {/* count */}
                        <div className="inline-flex items-center gap-2 text-sm opacity-40 font-mono">
                            <Icon name="users" size={14} />
                            <span>{signCount.toLocaleString()} {lang==='en'?'minds signed':'মন স্বাক্ষরিত'}</span>
                        </div>
                    </Reveal>

                    {/* scroll hint */}
                    <div className="absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 opacity-30">
                        <span className="text-[9px] font-mono tracking-[0.3em] uppercase">{T.scroll_label}</span>
                        <div className="animate-bounce"><Icon name="chevron-down" size={20} /></div>
                    </div>
                </header>

                {/* ══ PREAMBLE ════════════════════════════════════════════════ */}
                <section className="relative z-10 py-24 md:py-32 px-6">
                    <div className="max-w-3xl mx-auto">
                        <Reveal>
                            <div className="flex items-center gap-4 mb-16">
                                <div className={`h-px flex-1 ${isNight?'bg-white/10':'bg-black/10'}`} />
                                <span className="text-[9px] font-mono tracking-[0.3em] uppercase text-vabuuk-saffron opacity-70">{P.label}</span>
                                <div className={`h-px flex-1 ${isNight?'bg-white/10':'bg-black/10'}`} />
                            </div>
                        </Reveal>

                        <Reveal delay={100}>
                            <div className={`relative p-8 md:p-12 rounded-2xl ${isNight?'glass-panel':'light-glass'}`}>
                                <div className="quote-marks absolute -top-4 -left-2 select-none pointer-events-none">"</div>
                                <p className={`text-lg md:text-xl leading-relaxed drop-cap ${lang==='bn'?'font-bengali':'font-light'} ${isNight?'text-vabuuk-paper/85':'text-vabuuk-ink/85'}`}>
                                    {P.body}
                                </p>
                                <InkLine />
                                <blockquote className={`mt-8 pl-5 border-l-2 border-vabuuk-saffron/50 text-lg font-serif italic ${lang==='bn'?'font-bengali':''} ${isNight?'text-vabuuk-paper/70':'text-vabuuk-ink/70'}`}>
                                    {P.pull}
                                </blockquote>
                            </div>
                        </Reveal>

                        {/* Trinity bars */}
                        <Reveal delay={200}>
                            <div className="mt-16 grid grid-cols-3 gap-4 md:gap-6 text-center">
                                {[
                                    {pct:'70%', label:lang==='en'?'The Architect':'স্থপতি', sub:lang==='en'?'Logic & Data':'যুক্তি ও তথ্য', color:'text-blue-400'},
                                    {pct:'20%', label:lang==='en'?'The Boatman':'মাঝি',    sub:lang==='en'?'Faith & Flow':'বিশ্বাস ও প্রবাহ', color:'text-vabuuk-saffron'},
                                    {pct:'10%', label:lang==='en'?'The Bridge':'সেতু',     sub:lang==='en'?'Synthesis':'সংশ্লেষণ', color:'text-emerald-400'},
                                ].map((item,i) => (
                                    <div key={i} className={`p-5 md:p-7 rounded-xl border transition-all duration-500 hover:-translate-y-1 ${isNight?'border-white/5 bg-white/[0.02] hover:border-vabuuk-saffron/20':'border-black/5 bg-black/[0.02] hover:border-vabuuk-saffron/30'}`}>
                                        <div className={`text-2xl md:text-3xl font-serif font-bold mb-2 ${item.color}`}>{item.pct}</div>
                                        <div className={`text-xs font-bold mb-1 ${lang==='bn'?'font-bengali':''} ${isNight?'text-white':'text-vabuuk-void'}`}>{item.label}</div>
                                        <div className="text-[9px] font-mono opacity-40 tracking-widest uppercase">{item.sub}</div>
                                    </div>
                                ))}
                            </div>
                        </Reveal>
                    </div>
                </section>

                {/* ══ SIX TENETS ══════════════════════════════════════════════ */}
                <section className={`relative z-10 py-24 md:py-32 ${isNight?'bg-vabuuk-void_deep/60':'bg-vabuuk-paper_dim/40'}`}>
                    <div className="absolute inset-0 bg-grain opacity-20 mix-blend-overlay pointer-events-none" />
                    <div className="max-w-6xl mx-auto px-6">
                        <Reveal>
                            <div className="text-center mb-20">
                                <p className="text-[9px] font-mono tracking-[0.35em] text-vabuuk-saffron uppercase mb-4 opacity-70">{T.section_tenets}</p>
                                <h2 className={`text-3xl md:text-5xl font-serif font-bold mb-4 ${lang==='bn'?'font-bengali':''} ${isNight?'text-white':'text-vabuuk-void'}`}>{T.section_tenets}</h2>
                                <p className={`text-sm opacity-50 max-w-md mx-auto ${lang==='bn'?'font-bengali':''}`}>{T.section_tenets_sub}</p>
                            </div>
                        </Reveal>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                            {MD.tenets.map((tenet, i) => {
                                const c   = CLR[tenet.color];
                                const isX = expanded === tenet.id;
                                const ct  = tenet[lang];
                                return (
                                    <Reveal key={tenet.id} delay={i*80}>
                                        <div
                                            className={`tenet-card group relative rounded-2xl border overflow-hidden cursor-pointer ${isNight?'glass-panel':'light-glass'} ${c.ring} ${isX?'active-tenet':isNight?'hover:border-white/15':'hover:border-black/15'}`}
                                            onClick={() => setExpanded(isX?null:tenet.id)}
                                        >
                                            {/* Watermark numeral */}
                                            <div className={`absolute top-3 right-4 font-serif text-5xl font-bold opacity-[0.04] select-none pointer-events-none ${isNight?'text-white':'text-vabuuk-void'}`}>{tenet.id}</div>

                                            <div className="p-6 md:p-7">
                                                <div className={`w-10 h-10 rounded-lg ${c.bg} ${c.text} flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`}>
                                                    <Icon name={tenet.icon} size={18} />
                                                </div>

                                                <div className="flex items-start justify-between gap-2 mb-2">
                                                    <div>
                                                        <div className={`text-[9px] font-mono tracking-[0.25em] uppercase mb-1 ${c.text} opacity-70`}>Tenet {tenet.id}</div>
                                                        <h3 className={`font-serif font-bold text-lg leading-tight ${lang==='bn'?'font-bengali':''} ${isNight?'text-white':'text-vabuuk-void'}`}>{ct.title}</h3>
                                                    </div>
                                                    <div className={`flex-shrink-0 mt-1 opacity-30 group-hover:opacity-70 transition-all duration-300 ${isX?'rotate-180':''}`}>
                                                        <Icon name="chevron-down" size={16} />
                                                    </div>
                                                </div>

                                                <p className={`text-[10px] font-mono tracking-wider uppercase mb-4 ${c.text} opacity-60`}>{ct.sub}</p>
                                                <p className={`text-sm leading-relaxed ${lang==='bn'?'font-bengali':'font-light'} ${isNight?'opacity-70':'opacity-75'}`}>{ct.body}</p>

                                                {/* Expandable */}
                                                <div className={`overflow-hidden transition-all duration-500 ${isX?'max-h-96 mt-5':'max-h-0'}`}>
                                                    <div className={`pt-5 border-t ${isNight?'border-white/5':'border-black/5'} space-y-4`}>
                                                        <p className={`text-sm leading-relaxed ${lang==='bn'?'font-bengali':'font-light'} ${isNight?'opacity-60':'opacity-65'}`}>{ct.detail}</p>
                                                        <blockquote className={`pl-3 border-l-2 ${c.ring} text-sm font-serif italic ${lang==='bn'?'font-bengali':''} ${isNight?'text-vabuuk-saffron/80':'text-vabuuk-saffron'}`}>"{ct.quote}"</blockquote>
                                                    </div>
                                                </div>

                                                <div className={`mt-5 text-[9px] font-mono tracking-[0.2em] uppercase transition-colors duration-300 ${c.text} opacity-50 group-hover:opacity-80`}>
                                                    {isX ? T.tenet_collapse : T.tenet_expand} →
                                                </div>
                                            </div>
                                        </div>
                                    </Reveal>
                                );
                            })}
                        </div>
                    </div>
                </section>

                {/* ══ DECLARATION ═════════════════════════════════════════════ */}
                <section className="relative z-10 py-24 md:py-32 px-6">
                    <div className="max-w-5xl mx-auto">
                        <Reveal>
                            <div className="text-center mb-20">
                                <p className="text-[9px] font-mono tracking-[0.35em] text-vabuuk-saffron uppercase mb-4 opacity-70">{T.section_declaration}</p>
                                <h2 className={`text-3xl md:text-5xl font-serif font-bold ${lang==='bn'?'font-bengali':''} ${isNight?'text-white':'text-vabuuk-void'}`}>{DC.title}</h2>
                            </div>
                        </Reveal>

                        <div className="space-y-3 max-w-2xl mx-auto mb-20">
                            {DC.items.map((item,i) => (
                                <Reveal key={i} delay={i*70}>
                                    <div className={`flex items-start gap-5 p-5 rounded-xl border transition-all duration-500 hover:-translate-x-1 group ${isNight?'border-white/5 hover:border-vabuuk-saffron/20 bg-white/[0.01]':'border-black/5 hover:border-vabuuk-saffron/20 bg-black/[0.01]'}`}>
                                        <div className="flex-shrink-0 w-8 h-8 rounded-full bg-vabuuk-saffron/10 text-vabuuk-saffron flex items-center justify-center text-xs font-serif font-bold group-hover:bg-vabuuk-saffron group-hover:text-white transition-all duration-300">
                                            {i+1}
                                        </div>
                                        <p className={`text-base leading-relaxed pt-0.5 ${lang==='bn'?'font-bengali':'font-light'} ${isNight?'opacity-80':'opacity-75'}`}>{item}</p>
                                    </div>
                                </Reveal>
                            ))}
                        </div>

                        <Reveal>
                            <div className="text-center">
                                <InkLine />
                                <p className={`mt-8 text-sm font-serif italic opacity-50 ${lang==='bn'?'font-bengali':''}`}>{DC.closing}</p>
                                <p className="mt-2 text-xs font-mono opacity-30 tracking-widest">{T.sign_off}</p>
                            </div>
                        </Reveal>
                    </div>
                </section>

                {/* ══ SIGN ════════════════════════════════════════════════════ */}
                <section className="relative z-10 py-24 overflow-hidden">
                    <div className="absolute inset-0 bg-vabuuk-saffron" />
                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10" />
                    <div className="absolute inset-0 bg-grain opacity-20 mix-blend-overlay" />

                    <div className="relative z-10 max-w-2xl mx-auto px-6 text-center text-white">
                        <Reveal>
                            <div className="w-14 h-14 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-8">
                                <Icon name="feather" size={24} />
                            </div>
                            <h2 className={`text-3xl md:text-5xl font-serif font-bold mb-4 ${lang==='bn'?'font-bengali':''}`}>
                                {lang==='en'?'Sign the Manifesto':'ইশতেহারে স্বাক্ষর করুন'}
                            </h2>
                            <p className={`text-lg opacity-80 mb-10 font-light ${lang==='bn'?'font-bengali':''}`}>
                                {lang==='en'?'Add your name to the intellectual record. No email. No spam. Just intention.':'বৌদ্ধিক রেকর্ডে আপনার নাম যোগ করুন। কোনো ইমেইল নেই। শুধু অভিপ্রায়।'}
                            </p>

                            {signed ? (
                                <div className="bg-white/20 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
                                    <Icon name="check-circle" size={40} className="text-white mx-auto mb-4" />
                                    <p className={`text-xl font-serif font-bold mb-2 ${lang==='bn'?'font-bengali':''}`}>
                                        {lang==='en'?'You are now part of the record.':'আপনি এখন রেকর্ডের অংশ।'}
                                    </p>
                                    <p className="text-sm opacity-70 font-mono">{signCount.toLocaleString()} {lang==='en'?'minds and counting.':'মন এবং গণনা চলছে।'}</p>
                                </div>
                            ) : (
                                <div className="flex gap-3 max-w-md mx-auto">
                                    <input
                                        type="text" value={signName} onChange={e=>setSignName(e.target.value)}
                                        onKeyDown={e=>e.key==='Enter'&&handleSign()}
                                        placeholder={lang==='en'?'Your name or alias...':'আপনার নাম বা ছদ্মনাম...'}
                                        className={`flex-1 px-5 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 outline-none focus:bg-white/30 focus:border-white/60 transition font-light ${lang==='bn'?'font-bengali':''}`}
                                    />
                                    <button onClick={handleSign} className="px-6 py-3 bg-white text-vabuuk-saffron font-bold rounded-xl hover:bg-white/90 active:scale-95 transition-all duration-200 flex items-center gap-2 whitespace-nowrap">
                                        <Icon name="pen-line" size={16} />{lang==='en'?'Sign':'স্বাক্ষর'}
                                    </button>
                                </div>
                            )}

                            <div className="mt-8 flex justify-center gap-6 opacity-60 text-sm">
                                <span className="font-mono">{signCount.toLocaleString()} {lang==='en'?'signed':'স্বাক্ষরিত'}</span>
                                <span>·</span>
                                <button onClick={handleShare} className="flex items-center gap-1.5 hover:opacity-100 transition">
                                    <Icon name="share-2" size={13} />
                                    {lang==='en'?'Share this Manifesto':'ইশতেহার শেয়ার করুন'}
                                </button>
                            </div>
                        </Reveal>
                    </div>
                </section>

                {/* ══ CTA CARDS ═══════════════════════════════════════════════ */}
                <section className="relative z-10 py-24 px-6">
                    <div className="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">
                        <Reveal delay={0}>
                            <a href="/academy" className={`group block p-8 md:p-10 rounded-2xl border transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl ${isNight?'glass-panel glass-panel-hover':'light-glass light-glass-hover'}`}>
                                <div className="w-12 h-12 rounded-xl bg-vabuuk-saffron/10 text-vabuuk-saffron flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-vabuuk-saffron group-hover:text-white transition-all duration-300">
                                    <Icon name="graduation-cap" size={22} />
                                </div>
                                <div className="text-[9px] font-mono tracking-[0.2em] text-vabuuk-saffron uppercase mb-2 opacity-70">Next Step</div>
                                <h3 className={`text-2xl font-serif font-bold mb-3 group-hover:text-vabuuk-saffron transition-colors ${lang==='bn'?'font-bengali':''} ${isNight?'text-white':'text-vabuuk-void'}`}>{T.cta_academy}</h3>
                                <p className={`text-sm leading-relaxed mb-6 ${isNight?'opacity-60':'opacity-65'} ${lang==='bn'?'font-bengali':'font-light'}`}>
                                    {lang==='en'?'A 4-week curriculum to reclaim your mind from the attention economy.':'মনোযোগ অর্থনীতি থেকে আপনার মন পুনরুদ্ধারের ৪-সপ্তাহের পাঠ্যক্রম।'}
                                </p>
                                <div className="flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-vabuuk-saffron group-hover:gap-4 transition-all duration-300">
                                    <span>{lang==='en'?'Enter Academy':'একাডেমি খুলুন'}</span><Icon name="arrow-right" size={14} />
                                </div>
                            </a>
                        </Reveal>
                        <Reveal delay={120}>
                            <a href="/library" className={`group block p-8 md:p-10 rounded-2xl border transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl ${isNight?'glass-panel glass-panel-hover':'light-glass light-glass-hover'}`}>
                                <div className="w-12 h-12 rounded-xl bg-blue-500/10 text-blue-400 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-blue-500 group-hover:text-white transition-all duration-300">
                                    <Icon name="book-open" size={22} />
                                </div>
                                <div className="text-[9px] font-mono tracking-[0.2em] text-blue-400 uppercase mb-2 opacity-70">Explore</div>
                                <h3 className={`text-2xl font-serif font-bold mb-3 group-hover:text-blue-400 transition-colors ${lang==='bn'?'font-bengali':''} ${isNight?'text-white':'text-vabuuk-void'}`}>{T.cta_library}</h3>
                                <p className={`text-sm leading-relaxed mb-6 ${isNight?'opacity-60':'opacity-65'} ${lang==='bn'?'font-bengali':'font-light'}`}>
                                    {lang==='en'?'Curated books, essays, and visual philosophy for the seeking mind.':'সন্ধানী মনের জন্য কিউরেটেড বই, প্রবন্ধ এবং ভিজ্যুয়াল দর্শন।'}
                                </p>
                                <div className="flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-blue-400 group-hover:gap-4 transition-all duration-300">
                                    <span>{lang==='en'?'Open Library':'লাইব্রেরি খুলুন'}</span><Icon name="arrow-right" size={14} />
                                </div>
                            </a>
                        </Reveal>
                    </div>
                </section>

                {/* ══ FOOTER ══════════════════════════════════════════════════ */}
                <footer className={`mt-8 border-t py-12 text-center relative z-10 ${isNight?'border-white/5':'border-black/5'}`}>
                    <Reveal>
                        <a href="/" className="inline-block group">
                            <div className="w-10 h-10 bg-vabuuk-saffron mx-auto rounded-full flex items-center justify-center text-white font-serif font-bold text-xl mb-5 shadow-[0_0_15px_rgba(217,119,6,0.3)] group-hover:rotate-45 transition-transform duration-500">V</div>
                        </a>
                        <p className={`text-lg font-serif italic opacity-60 mb-6 max-w-md mx-auto leading-relaxed ${lang==='bn'?'font-bengali':''}`}>
                            "{lang==='en'?T.footer_motto:'ভাবনায় যুক্তি, বিশ্বাসে মুক্তি।'}"
                        </p>
                        <div className="flex justify-center gap-5 opacity-30 mb-6">
                            {['youtube','facebook','instagram'].map(s => (
                                <span key={s} className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition">
                                    <Icon name={s} size={18} />
                                </span>
                            ))}
                        </div>
                        <p className="text-[9px] font-mono uppercase tracking-[0.3em] opacity-20">&copy; 2026 VABUUK Nexus. Dhaka, Bangladesh.</p>
                    </Reveal>
                </footer>

                {/* Share toast */}
                {toast && (
                    <div className="fixed bottom-6 left-1/2 -translate-x-1/2 z-50 pointer-events-none">
                        <div className={`px-5 py-3 rounded-xl shadow-2xl flex items-center gap-3 border backdrop-blur-xl animate-slide-up ${isNight?'bg-vabuuk-void/90 border-white/10 text-white':'bg-white/95 border-black/5 text-vabuuk-void'}`}>
                            <Icon name="check" size={15} className="text-green-400" />
                            <span className="text-sm font-medium">{lang==='en'?'Link copied to clipboard':'লিংক কপি হয়েছে'}</span>
                        </div>
                    </div>
                )}

                {/* WhatsApp FAB */}
                <a href="https://wa.me/8801700000000" target="_blank" rel="noopener noreferrer"
                    className="fixed bottom-6 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-transform duration-300 group">
                    <Icon name="message-circle" size={26} />
                    <span className="absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-black text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 whitespace-nowrap transition-all duration-300 shadow-xl">
                        {lang==='en'?'Chat with Architect':'স্থপতির সাথে কথা বলুন'}
                    </span>
                </a>

            </div>
        );
    }

    
 window.ManifestoView = ManifestoView;
})();
</script>
<script type="text/babel">
(function(){

        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        // ============================================================
        // 1. SYLLABUS DATA
        // ============================================================

        const SYLLABUS = [
            {
                id: 1,
                week: "WEEK 1",
                title: { en: "The Noise", bn: "কোলাহল" },
                theme: { en: "Diagnosis & Detox", bn: "নির্ণয় ও বিষমুক্তি" },
                desc: {
                    en: "Identifying the invisible chains of algorithmic addiction. Before you can build, you must see the prison.",
                    bn: "অ্যালগরিদমিক আসক্তির অদৃশ্য শিকল চিহ্নিত করা। নির্মাণের আগে, কারাগারটি দেখতে হবে।"
                },
                icon: "scan-eye",
                lectures: [
                    {
                        code: "1.1",
                        title: { en: "The Dopamine Trap: Why you scroll.", bn: "ডোপামিন ফাঁদ: কেন আপনি স্ক্রল করেন।" },
                        duration: "12 min"
                    },
                    {
                        code: "1.2",
                        title: { en: "Cognitive Audit: Measuring your 'Brain Rot'.", bn: "জ্ঞানীয় নিরীক্ষা: আপনার 'ব্রেইন রট' পরিমাপ।" },
                        duration: "18 min"
                    }
                ],
                exercise: {
                    type: "audit",
                    title: { en: "The Dopamine Audit", bn: "ডোপামিন নিরীক্ষা" },
                    question: {
                        en: "List 3 apps that drain you, but give nothing back. Be honest — the first step to freedom is seeing the chains.",
                        bn: "৩টি অ্যাপের তালিকা করুন যা আপনাকে শুষে নেয়, কিন্তু কিছুই ফেরত দেয় না।"
                    },
                    placeholder: { en: "1. Instagram — 2 hours daily, zero value...", bn: "১. ইনস্টাগ্রাম — প্রতিদিন ২ ঘণ্টা, শূন্য মূল্য..." }
                }
            },
            {
                id: 2,
                week: "WEEK 2",
                title: { en: "The Illusion", bn: "বিভ্রম" },
                theme: { en: "Deconstruction", bn: "বিনির্মাণ" },
                desc: {
                    en: "Breaking down the false narratives of 'Success' and 'Hustle'. What if everything you were taught about winning was wrong?",
                    bn: "'সাফল্য' এবং 'হাসলের' মিথ্যা আখ্যান ভেঙে ফেলা। জেতা সম্পর্কে যা শেখানো হয়েছে তা যদি ভুল হয়?"
                },
                icon: "eye-off",
                lectures: [
                    {
                        code: "2.1",
                        title: { en: "The Myth of More: Why happiness is subtraction.", bn: "বেশির মিথ: কেন সুখ হলো বিয়োগ।" },
                        duration: "15 min"
                    },
                    {
                        code: "2.2",
                        title: { en: "The Steelman Argument: Empathy as a weapon.", bn: "স্টিলম্যান আর্গুমেন্ট: অস্ত্র হিসেবে সহানুভূতি।" },
                        duration: "20 min"
                    }
                ],
                exercise: {
                    type: "steelman",
                    title: { en: "Steelman Generator", bn: "স্টিলম্যান জেনারেটর" },
                    question: {
                        en: "Write the strongest argument FOR something you hate. This is not about agreeing — it's about understanding.",
                        bn: "আপনি যা ঘৃণা করেন তার পক্ষে সবচেয়ে শক্তিশালী যুক্তি লিখুন। এটি সম্মত হওয়া নয় — এটি বোঝা।"
                    },
                    placeholder: { en: "I disagree with _____, but the strongest case for it is...", bn: "আমি _____-এর সাথে একমত নই, কিন্তু এর পক্ষে সবচেয়ে শক্তিশালী যুক্তি হলো..." }
                }
            },
            {
                id: 3,
                week: "WEEK 3",
                title: { en: "The Bridge", bn: "সেতু" },
                theme: { en: "Technical Friction", bn: "প্রযুক্তিগত ঘর্ষণ" },
                desc: {
                    en: "Building the physical and digital walls to protect focus. Turning intention into architecture.",
                    bn: "মনোযোগ রক্ষার জন্য ভৌত ও ডিজিটাল দেয়াল নির্মাণ। উদ্দেশ্যকে স্থাপত্যে পরিণত করা।"
                },
                icon: "shield",
                lectures: [
                    {
                        code: "3.1",
                        title: { en: "Friction Design: Making bad habits hard.", bn: "ঘর্ষণ নকশা: খারাপ অভ্যাসকে কঠিন করা।" },
                        duration: "14 min"
                    },
                    {
                        code: "3.2",
                        title: { en: "The Grayscale Protocol: Killing the color triggers.", bn: "গ্রেস্কেল প্রোটোকল: রঙের ট্রিগার ধ্বংস।" },
                        duration: "10 min"
                    }
                ],
                exercise: {
                    type: "friction",
                    title: { en: "Friction Plan", bn: "ঘর্ষণ পরিকল্পনা" },
                    question: {
                        en: "What is one physical barrier you will build today? Think environment design, not willpower.",
                        bn: "আজ আপনি কোন একটি ভৌত বাধা তৈরি করবেন? ইচ্ছাশক্তি নয়, পরিবেশ নকশা ভাবুন।"
                    },
                    placeholder: { en: "I will move my phone charger to another room so...", bn: "আমি আমার ফোনের চার্জার অন্য ঘরে রাখব যাতে..." }
                }
            },
            {
                id: 4,
                week: "WEEK 4",
                title: { en: "The Boatman", bn: "মাঝি" },
                theme: { en: "Flow & Legacy", bn: "প্রবাহ ও উত্তরাধিকার" },
                desc: {
                    en: "Now that the noise is gone, what do we do with the silence? Learning to navigate the void with purpose.",
                    bn: "এখন কোলাহল চলে গেছে, নীরবতা দিয়ে কী করব? শূন্যতাকে উদ্দেশ্যের সাথে চালনা শেখা।"
                },
                icon: "compass",
                lectures: [
                    {
                        code: "4.1",
                        title: { en: "Silence as a Skill: Navigating discomfort.", bn: "দক্ষতা হিসেবে নীরবতা: অস্বস্তি নেভিগেশন।" },
                        duration: "16 min"
                    },
                    {
                        code: "4.2",
                        title: { en: "Deep Work Protocols: 4 hours > 8 hours.", bn: "ডিপ ওয়ার্ক প্রোটোকল: ৪ ঘণ্টা > ৮ ঘণ্টা।" },
                        duration: "22 min"
                    }
                ],
                exercise: {
                    type: "timer",
                    title: { en: "Monk Mode Timer", bn: "মঙ্ক মোড টাইমার" },
                    question: {
                        en: "Enter deep work state. 25 minutes of absolute focus. No phone. No tabs. Just you and the work.",
                        bn: "গভীর কাজের অবস্থায় প্রবেশ করুন। ২৫ মিনিট পরম মনোযোগ। ফোন নেই। ট্যাব নেই। শুধু আপনি আর কাজ।"
                    }
                }
            }
        ];

        const TRANSLATIONS = {
            en: {
                nav_home: "Sanctuary",
                nav_manifesto: "Manifesto",
                nav_academy: "Academy",
                nav_library: "Library",
                page_title: "The Academy",
                page_sub: "University of Silence — A 4-week curriculum to reclaim your mind.",
                sidebar_title: "ACADEMY",
                sidebar_sub: "EST. 2026",
                progress_label: "PROGRESS",
                switch_lang: "Bengali",
                breadcrumb_syllabus: "Syllabus",
                lecture_label: "LECTURE",
                exercise_label: "Active Recall Protocol",
                exercise_placeholder: "Type your reflection here...",
                btn_complete: "Complete Module",
                btn_update: "Update Journal",
                btn_next: "Next Module",
                btn_start_timer: "Initiate Deep Work",
                btn_stop_timer: "Abort Session",
                btn_completed: "Module Completed",
                all_complete_title: "Curriculum Complete",
                all_complete_sub: "You have completed the University of Silence. The noise is gone. Now, build.",
                fomo_action: "just completed",
                fomo_names: ["Tanvir from Uttara", "Sarah from Gulshan", "Rifat from Sylhet", "Nadia from Chittagong", "Arafat from Mirpur", "Zara from Dhanmondi", "Karim from Banani"],
                footer_motto: "Logic in Thought, Freedom in Belief.",
                menu_toggle: "Curriculum",
                locked_msg: "Complete the previous module to unlock",
            },
            bn: {
                nav_home: "অভয়ারণ্য",
                nav_manifesto: "ম্যানিফেস্টো",
                nav_academy: "একাডেমি",
                nav_library: "লাইব্রেরি",
                page_title: "একাডেমি",
                page_sub: "নীরবতার বিশ্ববিদ্যালয় — মন পুনরুদ্ধারের ৪-সপ্তাহের পাঠ্যক্রম।",
                sidebar_title: "একাডেমি",
                sidebar_sub: "প্রতিষ্ঠা ২০২৬",
                progress_label: "অগ্রগতি",
                switch_lang: "English",
                breadcrumb_syllabus: "পাঠ্যসূচি",
                lecture_label: "লেকচার",
                exercise_label: "সক্রিয় স্মরণ প্রোটোকল",
                exercise_placeholder: "আপনার প্রতিফলন লিখুন...",
                btn_complete: "মডিউল সম্পন্ন করুন",
                btn_update: "জার্নাল আপডেট",
                btn_next: "পরবর্তী মডিউল",
                btn_start_timer: "গভীর কাজ শুরু",
                btn_stop_timer: "সেশন বাতিল",
                btn_completed: "মডিউল সম্পন্ন",
                all_complete_title: "পাঠ্যক্রম সম্পন্ন",
                all_complete_sub: "আপনি নীরবতার বিশ্ববিদ্যালয় সম্পন্ন করেছেন। কোলাহল চলে গেছে। এখন, নির্মাণ করুন।",
                fomo_action: "সম্পন্ন করেছেন",
                fomo_names: ["তানভীর, উত্তরা", "সারাহ, গুলশান", "রিফাত, সিলেট", "নাদিয়া, চট্টগ্রাম", "আরাফাত, মিরপুর", "জারা, ধানমন্ডি", "করিম, বনানী"],
                footer_motto: "ভাবনায় যুক্তি, বিশ্বাসে মুক্তি।",
                menu_toggle: "পাঠ্যসূচি",
                locked_msg: "আনলক করতে আগের মডিউল সম্পন্ন করুন",
            }
        };

        // ============================================================
        // 2. UTILITY COMPONENTS
        // ============================================================

        const Icon = ({ name, size = 20, className = '', fill = 'none', strokeWidth = 2 }) => {
            const ref = useRef(null);
            useEffect(() => {
                if (ref.current && window.lucide) {
                    ref.current.innerHTML = '';
                    const iconNode = document.createElement('i');
                    iconNode.setAttribute('data-lucide', name);
                    iconNode.setAttribute('width', size);
                    iconNode.setAttribute('height', size);
                    if (fill !== 'none') iconNode.setAttribute('fill', fill);
                    iconNode.setAttribute('stroke-width', strokeWidth);
                    ref.current.appendChild(iconNode);
                    window.lucide.createIcons({ nodes: [iconNode] });
                }
            }, [name, size, fill, strokeWidth]);
            return <span ref={ref} className={`inline-flex items-center justify-center ${className}`} />;
        };

        const Reveal = ({ children, delay = 0, className = '' }) => {
            const ref = useRef(null);
            const [visible, setVisible] = useState(false);
            useEffect(() => {
                const observer = new IntersectionObserver(
                    ([entry]) => { if (entry.isIntersecting) { setVisible(true); observer.disconnect(); } },
                    { threshold: 0.08, rootMargin: '0px 0px -40px 0px' }
                );
                if (ref.current) observer.observe(ref.current);
                return () => observer.disconnect();
            }, []);
            return (
                <div ref={ref} className={`transition-all duration-700 ${visible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'} ${className}`} style={{ transitionDelay: `${delay}ms` }}>
                    {children}
                </div>
            );
        };

        const ProgressBar = ({ progress, className = '' }) => (
            <div className={`w-full h-1.5 bg-white/10 rounded-full overflow-hidden ${className}`}>
                <div
                    className="h-full bg-gradient-to-r from-vabuuk-saffron to-vabuuk-saffron_glow rounded-full transition-all duration-1000 ease-out"
                    style={{ width: `${progress}%` }}
                ></div>
            </div>
        );

        // ============================================================
        // 3. MAIN APPLICATION
        // ============================================================

        function AcademyView() {
            // --- State ---
            const [lang, setLang] = useState('en');
            const [activeWeek, setActiveWeek] = useState(1);
            const [completedWeeks, setCompletedWeeks] = useState([]);
            const [exerciseInput, setExerciseInput] = useState('');
            const [savedInputs, setSavedInputs] = useState({});
            const [timerActive, setTimerActive] = useState(false);
            const [timeLeft, setTimeLeft] = useState(25 * 60);
            const [timeMode, setTimeMode] = useState('night');
            const [fomo, setFomo] = useState(null);
            const [sidebarOpen, setSidebarOpen] = useState(false);
            const [justCompleted, setJustCompleted] = useState(null);
            const mainRef = useRef(null);

            const T = TRANSLATIONS[lang];

            // --- Chrono-Logic ---
            useEffect(() => {
                const hour = new Date().getHours();
                setTimeMode((hour >= 6 && hour < 18) ? 'day' : 'night');
            }, []);

            // --- Persistence ---
            useEffect(() => {
                try {
                    const savedProgress = localStorage.getItem('vabuuk_academy_progress');
                    const savedLang = localStorage.getItem('vabuuk_lang');
                    const savedWeek = localStorage.getItem('vabuuk_academy_week');
                    const savedJournal = localStorage.getItem('vabuuk_academy_journal');
                    if (savedProgress) setCompletedWeeks(JSON.parse(savedProgress));
                    if (savedLang) setLang(savedLang);
                    if (savedWeek) setActiveWeek(parseInt(savedWeek));
                    if (savedJournal) setSavedInputs(JSON.parse(savedJournal));
                } catch (e) { /* silent fail */ }
            }, []);

            useEffect(() => {
                localStorage.setItem('vabuuk_academy_progress', JSON.stringify(completedWeeks));
            }, [completedWeeks]);

            useEffect(() => {
                localStorage.setItem('vabuuk_lang', lang);
            }, [lang]);

            useEffect(() => {
                localStorage.setItem('vabuuk_academy_week', activeWeek.toString());
            }, [activeWeek]);

            useEffect(() => {
                localStorage.setItem('vabuuk_academy_journal', JSON.stringify(savedInputs));
            }, [savedInputs]);

            // --- Timer Logic (Week 4) ---
            useEffect(() => {
                let interval = null;
                if (timerActive && timeLeft > 0) {
                    interval = setInterval(() => setTimeLeft(prev => prev - 1), 1000);
                } else if (timeLeft === 0 && timerActive) {
                    setTimerActive(false);
                    completeWeek(4);
                }
                return () => clearInterval(interval);
            }, [timerActive, timeLeft]);

            // --- FOMO Engine ---
            useEffect(() => {
                const showFomo = () => {
                    const name = T.fomo_names[Math.floor(Math.random() * T.fomo_names.length)];
                    const week = SYLLABUS[Math.floor(Math.random() * SYLLABUS.length)];
                    setFomo({ name, week: week.title[lang] });
                    setTimeout(() => setFomo(null), 5000);
                };
                const timeout = setTimeout(showFomo, 10000);
                const interval = setInterval(showFomo, 22000);
                return () => { clearTimeout(timeout); clearInterval(interval); };
            }, [lang, T]);

            // --- Load saved input when switching weeks ---
            useEffect(() => {
                setExerciseInput(savedInputs[activeWeek] || '');
            }, [activeWeek]);

            // --- Actions ---
            const completeWeek = useCallback((id) => {
                if (!completedWeeks.includes(id)) {
                    setCompletedWeeks(prev => [...prev, id]);
                    setJustCompleted(id);
                    setTimeout(() => setJustCompleted(null), 2000);
                }
                if (exerciseInput.trim()) {
                    setSavedInputs(prev => ({ ...prev, [id]: exerciseInput }));
                }
                setExerciseInput('');
            }, [completedWeeks, exerciseInput]);

            const goToNextWeek = useCallback(() => {
                if (activeWeek < 4) {
                    setActiveWeek(activeWeek + 1);
                    if (mainRef.current) mainRef.current.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }, [activeWeek]);

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            };

            const timerProgress = ((25 * 60 - timeLeft) / (25 * 60)) * 100;
            const currentModule = SYLLABUS.find(w => w.id === activeWeek);
            const progress = (completedWeeks.length / 4) * 100;
            const allComplete = completedWeeks.length === 4;
            const isNight = timeMode === 'night';

            const isWeekLocked = (weekId) => {
                if (weekId === 1) return false;
                return !completedWeeks.includes(weekId - 1);
            };

            // Timer circle calculations
            const timerRadius = 70;
            const timerCircumference = 2 * Math.PI * timerRadius;
            const timerOffset = timerCircumference - (timerProgress / 100) * timerCircumference;

            return (
                <div className={`min-h-screen ${isNight ? 'bg-vabuuk-void_deep text-vabuuk-paper' : 'bg-vabuuk-paper text-vabuuk-void'} font-sans transition-colors duration-700`}>

                    {/* SCROLL PROGRESS */}
                    <div className="scroll-progress" style={{ width: `${progress}%` }} />

                    {/* AMBIENT PARTICLES */}
                    <div className="fixed inset-0 pointer-events-none overflow-hidden z-0">
                        <div className={`absolute top-[-10%] left-[-10%] w-[50vw] h-[50vw] rounded-full blur-[160px] ${isNight ? 'bg-vabuuk-saffron opacity-[0.04]' : 'bg-vabuuk-gold opacity-[0.1]'}`} />
                        <div className={`absolute bottom-[-20%] right-[-10%] w-[60vw] h-[60vw] rounded-full blur-[120px] ${isNight ? 'bg-blue-900 opacity-[0.03]' : 'bg-blue-200 opacity-[0.06]'}`} />
                        {isNight && (
                            <>
                                <div className="absolute w-[2px] h-[2px] bg-vabuuk-saffron rounded-full animate-dust opacity-40" style={{ top: '20%', left: '15%', animationDuration: '18s' }} />
                                <div className="absolute w-[1.5px] h-[1.5px] bg-white rounded-full animate-dust opacity-25" style={{ top: '60%', left: '80%', animationDuration: '22s', animationDelay: '3s' }} />
                                <div className="absolute w-[2px] h-[2px] bg-vabuuk-saffron rounded-full animate-dust opacity-30" style={{ top: '40%', left: '55%', animationDuration: '25s', animationDelay: '7s' }} />
                            </>
                        )}
                        <div className="absolute inset-0 bg-grain opacity-30 mix-blend-overlay" />
                    </div>

                    {/* LAYOUT: SIDEBAR + MAIN */}
                    <div className="flex min-h-screen relative z-10">

                        {/* MOBILE OVERLAY */}
                        {sidebarOpen && (
                            <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden" onClick={() => setSidebarOpen(false)} />
                        )}

                        {/* LEFT SIDEBAR */}
                        <aside className={`fixed md:sticky top-0 left-0 z-40 w-80 h-screen flex flex-col transition-transform duration-300 md:translate-x-0 ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} ${isNight ? 'bg-vabuuk-void_deep border-r border-white/5' : 'bg-white border-r border-black/5'}`}>

                            {/* Sidebar Header */}
                            <div className={`p-6 border-b ${isNight ? 'border-white/5' : 'border-black/5'}`}>
                                <div className="flex items-center justify-between mb-6">
                                    <a href="/" className="flex items-center gap-3 group">
                                        <div className="w-9 h-9 bg-vabuuk-saffron text-white flex items-center justify-center rounded-lg font-serif font-bold text-lg shadow-[0_0_12px_rgba(217,119,6,0.25)] group-hover:rotate-45 transition-transform duration-500">V</div>
                                        <div>
                                            <h1 className="font-serif font-bold tracking-wider text-sm">{T.sidebar_title}</h1>
                                            <p className="text-[8px] opacity-40 tracking-[0.2em] font-mono">{T.sidebar_sub}</p>
                                        </div>
                                    </a>
                                    <button onClick={() => setSidebarOpen(false)} className="md:hidden p-1 opacity-50 hover:opacity-100">
                                        <Icon name="x" size={18} />
                                    </button>
                                </div>

                                {/* Navigation */}
                                <div className={`flex items-center gap-3 text-[10px] font-mono tracking-wide mb-6 pb-4 border-b ${isNight ? 'border-white/5' : 'border-black/5'}`}>
                                    <a href="/" className="opacity-40 hover:opacity-100 hover:text-vabuuk-saffron transition">{T.nav_home}</a>
                                    <span className="opacity-20">/</span>
                                    <a href="/library" className="opacity-40 hover:opacity-100 hover:text-vabuuk-saffron transition">{T.nav_library}</a>
                                    <span className="opacity-20">/</span>
                                    <span className="text-vabuuk-saffron font-bold">{T.nav_academy}</span>
                                </div>

                                {/* Progress */}
                                <div className="flex justify-between text-[10px] opacity-50 font-mono mb-2 tracking-widest">
                                    <span>{T.progress_label}</span>
                                    <span>{Math.round(progress)}%</span>
                                </div>
                                <ProgressBar progress={progress} />

                                {allComplete && (
                                    <div className="mt-3 flex items-center gap-2 text-[10px] text-green-400 font-mono">
                                        <Icon name="trophy" size={12} />
                                        <span className="tracking-wider">{T.all_complete_title}</span>
                                    </div>
                                )}
                            </div>

                            {/* Timeline */}
                            <div className="flex-1 overflow-y-auto p-6 space-y-1 relative">
                                {/* Timeline Line */}
                                <div className={`absolute left-[2.15rem] top-6 bottom-6 w-px ${isNight ? 'bg-white/[0.06]' : 'bg-black/[0.06]'}`}>
                                    <div className="timeline-line w-full transition-all duration-1000 ease-out" style={{ height: `${progress}%` }} />
                                </div>

                                {SYLLABUS.map((week) => {
                                    const locked = isWeekLocked(week.id);
                                    const completed = completedWeeks.includes(week.id);
                                    const active = activeWeek === week.id;
                                    const isCelebrating = justCompleted === week.id;

                                    return (
                                        <div
                                            key={week.id}
                                            onClick={() => {
                                                if (!locked) {
                                                    setActiveWeek(week.id);
                                                    setSidebarOpen(false);
                                                    if (mainRef.current) mainRef.current.scrollTo({ top: 0, behavior: 'smooth' });
                                                }
                                            }}
                                            className={`relative z-10 pl-12 py-4 rounded-xl cursor-pointer group transition-all duration-300 ${locked ? 'opacity-30 cursor-not-allowed' : 'hover:bg-white/[0.03]'} ${active ? (isNight ? 'bg-white/[0.04]' : 'bg-black/[0.03]') : ''}`}
                                        >
                                            {/* Node */}
                                            <div className={`absolute left-3 top-5 w-7 h-7 rounded-full border-2 flex items-center justify-center transition-all duration-500 ${isCelebrating ? 'celebrate' : ''} ${active ? 'border-vabuuk-saffron bg-vabuuk-saffron text-white shadow-[0_0_12px_rgba(217,119,6,0.4)]' : completed ? 'border-green-500 bg-green-500/20 text-green-400' : locked ? (isNight ? 'border-white/10 bg-vabuuk-void_deep' : 'border-black/10 bg-white') : (isNight ? 'border-white/20 bg-vabuuk-void_deep' : 'border-black/15 bg-white')}`}>
                                                {completed && <Icon name="check" size={13} />}
                                                {locked && <Icon name="lock" size={11} className={isNight ? 'text-white/30' : 'text-black/30'} />}
                                                {active && !completed && <span className="w-2 h-2 bg-white rounded-full" />}
                                            </div>

                                            <div className="flex items-center gap-2 mb-1">
                                                <h3 className={`text-[10px] font-bold font-mono tracking-[0.15em] transition-colors ${active ? 'text-vabuuk-saffron' : isNight ? 'text-white/40 group-hover:text-white/70' : 'text-black/40 group-hover:text-black/70'}`}>
                                                    {week.week}
                                                </h3>
                                                {completed && <span className="text-[8px] text-green-400 font-mono tracking-wider">DONE</span>}
                                            </div>
                                            <h2 className={`font-serif font-bold text-base transition-colors leading-tight ${lang === 'bn' ? 'font-bengali' : ''} ${active ? (isNight ? 'text-white' : 'text-vabuuk-void') : isNight ? 'text-white/60' : 'text-black/60'}`}>
                                                {week.title[lang]}
                                            </h2>
                                            <p className={`text-[10px] font-mono mt-1 tracking-wide transition-colors ${active ? 'opacity-50' : 'opacity-30'}`}>
                                                {week.theme[lang]}
                                            </p>
                                        </div>
                                    );
                                })}
                            </div>

                            {/* Sidebar Footer */}
                            <div className={`p-6 border-t ${isNight ? 'border-white/5' : 'border-black/5'}`}>
                                <button
                                    onClick={() => setLang(lang === 'en' ? 'bn' : 'en')}
                                    className={`w-full py-2.5 border rounded-lg text-[10px] font-bold uppercase tracking-[0.15em] transition-all duration-300 hover:bg-vabuuk-saffron hover:text-white hover:border-transparent ${isNight ? 'border-white/10 hover:shadow-[0_0_15px_rgba(217,119,6,0.2)]' : 'border-black/10'}`}
                                >
                                    Switch to {T.switch_lang}
                                </button>
                            </div>
                        </aside>

                        {/* MAIN CONTENT */}
                        <main ref={mainRef} className="flex-1 min-h-screen overflow-y-auto relative">

                            {/* Mobile Header */}
                            <div className={`sticky top-0 z-20 md:hidden flex items-center justify-between px-4 py-3 backdrop-blur-xl border-b ${isNight ? 'bg-vabuuk-void_deep/80 border-white/5' : 'bg-vabuuk-paper/80 border-black/5'}`}>
                                <button onClick={() => setSidebarOpen(true)} className="flex items-center gap-2 text-xs font-bold tracking-wider">
                                    <Icon name="menu" size={18} />
                                    <span className="font-mono text-[10px] uppercase tracking-[0.15em]">{T.menu_toggle}</span>
                                </button>
                                <div className="flex items-center gap-2">
                                    <span className="text-[10px] font-mono opacity-40">{Math.round(progress)}%</span>
                                    <div className="w-20">
                                        <ProgressBar progress={progress} />
                                    </div>
                                </div>
                            </div>

                            <div className="max-w-4xl mx-auto px-5 md:px-10 lg:px-16 py-8 md:py-14 lg:py-20">

                                {/* All Complete Banner */}
                                {allComplete && (
                                    <Reveal>
                                        <div className={`mb-12 p-8 rounded-2xl border text-center ${isNight ? 'bg-green-500/5 border-green-500/20' : 'bg-green-50 border-green-200'}`}>
                                            <div className="w-16 h-16 mx-auto mb-4 bg-green-500/10 rounded-full flex items-center justify-center">
                                                <Icon name="trophy" size={32} className="text-green-400" />
                                            </div>
                                            <h2 className={`text-2xl font-serif font-bold mb-2 ${lang === 'bn' ? 'font-bengali' : ''}`}>{T.all_complete_title}</h2>
                                            <p className={`opacity-60 text-sm ${lang === 'bn' ? 'font-bengali' : ''}`}>{T.all_complete_sub}</p>
                                        </div>
                                    </Reveal>
                                )}

                                {/* Breadcrumbs */}
                                <Reveal>
                                    <div className="flex items-center gap-2 text-[10px] font-mono opacity-30 mb-8 uppercase tracking-[0.15em]">
                                        <span>{T.breadcrumb_syllabus}</span>
                                        <Icon name="chevron-right" size={11} />
                                        <span>{currentModule.week}</span>
                                        <Icon name="chevron-right" size={11} />
                                        <span className="text-vabuuk-saffron opacity-100">{currentModule.theme[lang]}</span>
                                    </div>
                                </Reveal>

                                {/* Module Header */}
                                <Reveal delay={100}>
                                    <header className="mb-14">
                                        <div className="flex items-center gap-3 mb-5">
                                            <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${isNight ? 'bg-vabuuk-saffron/10 text-vabuuk-saffron' : 'bg-vabuuk-saffron/10 text-vabuuk-saffron'}`}>
                                                <Icon name={currentModule.icon} size={24} />
                                            </div>
                                            <div>
                                                <span className="text-[9px] font-mono font-bold tracking-[0.2em] text-vabuuk-saffron uppercase">{currentModule.week}</span>
                                                {completedWeeks.includes(currentModule.id) && (
                                                    <span className="ml-2 text-[8px] font-mono text-green-400 tracking-wider">COMPLETED</span>
                                                )}
                                            </div>
                                        </div>
                                        <h1 className={`text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-serif font-bold mb-6 leading-[1.1] ${lang === 'bn' ? 'font-bengali' : ''} text-gradient-saffron`}>
                                            {currentModule.title[lang]}
                                        </h1>
                                        <p className={`text-lg md:text-xl font-light opacity-70 leading-relaxed border-l-[3px] border-vabuuk-saffron pl-6 max-w-2xl ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                            {currentModule.desc[lang]}
                                        </p>
                                    </header>
                                </Reveal>

                                {/* Lectures */}
                                <Reveal delay={200}>
                                    <div className="mb-14">
                                        <h3 className="text-[10px] font-mono font-bold tracking-[0.2em] uppercase opacity-40 mb-5">
                                            {T.lecture_label}S
                                        </h3>
                                        <div className="space-y-4">
                                            {currentModule.lectures.map((lec, i) => (
                                                <div key={i} className={`group p-5 md:p-6 rounded-xl flex items-center gap-5 transition-all duration-300 cursor-pointer ${isNight ? 'glass-panel glass-panel-hover' : 'light-glass light-glass-hover'}`}>
                                                    <div className={`w-12 h-12 md:w-14 md:h-14 rounded-xl flex items-center justify-center flex-shrink-0 transition-all duration-300 ${isNight ? 'bg-white/5 text-vabuuk-saffron group-hover:bg-vabuuk-saffron group-hover:text-white' : 'bg-vabuuk-saffron/10 text-vabuuk-saffron group-hover:bg-vabuuk-saffron group-hover:text-white'}`}>
                                                        <Icon name="play" size={22} fill="currentColor" />
                                                    </div>
                                                    <div className="flex-1 min-w-0">
                                                        <h4 className={`font-bold text-base md:text-lg leading-snug ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                                            {lec.title[lang]}
                                                        </h4>
                                                        <div className="flex items-center gap-3 mt-1.5">
                                                            <span className="text-[9px] font-mono opacity-40 tracking-wider uppercase flex items-center gap-1.5">
                                                                <Icon name="clock" size={10} /> {lec.duration}
                                                            </span>
                                                            <span className={`text-[8px] font-mono px-2 py-0.5 rounded ${isNight ? 'bg-white/5' : 'bg-black/5'} opacity-40`}>
                                                                {lec.code}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <Icon name="arrow-right" size={16} className="opacity-0 group-hover:opacity-50 transition-all duration-300 -translate-x-2 group-hover:translate-x-0 flex-shrink-0" />
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </Reveal>

                                {/* Interactive Exercise */}
                                <Reveal delay={300}>
                                    <section className={`relative overflow-hidden rounded-2xl border ${isNight ? 'bg-gradient-to-br from-white/[0.04] to-transparent border-white/[0.08]' : 'bg-gradient-to-br from-vabuuk-saffron/5 to-transparent border-vabuuk-saffron/10'}`}>
                                        {/* Background Decoration */}
                                        <div className="absolute top-0 right-0 p-6 opacity-[0.04]">
                                            <Icon name={currentModule.exercise.type === 'timer' ? 'hourglass' : 'pen-tool'} size={140} />
                                        </div>

                                        <div className="relative z-10 p-6 md:p-10">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="w-1.5 h-1.5 bg-vabuuk-saffron rounded-full animate-pulse" />
                                                <h3 className="text-vabuuk-saffron font-bold uppercase tracking-[0.2em] text-[10px]">
                                                    {T.exercise_label}
                                                </h3>
                                            </div>
                                            <h2 className={`text-2xl md:text-3xl font-serif font-bold mb-4 ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                                {currentModule.exercise.title[lang]}
                                            </h2>
                                            <p className={`mb-8 opacity-70 leading-relaxed max-w-xl ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                                {currentModule.exercise.question[lang]}
                                            </p>

                                            {/* Widget: Timer or Text */}
                                            {currentModule.exercise.type === 'timer' ? (
                                                <div className="text-center py-6 md:py-10">
                                                    {/* Timer Circle */}
                                                    <div className="relative inline-flex items-center justify-center mb-8">
                                                        <svg width="180" height="180" className="timer-ring">
                                                            <circle cx="90" cy="90" r={timerRadius}
                                                                fill="none"
                                                                stroke={isNight ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)'}
                                                                strokeWidth="4"
                                                            />
                                                            <circle cx="90" cy="90" r={timerRadius}
                                                                fill="none"
                                                                stroke={timerActive ? '#D97706' : 'rgba(217,119,6,0.3)'}
                                                                strokeWidth="4"
                                                                strokeLinecap="round"
                                                                strokeDasharray={timerCircumference}
                                                                strokeDashoffset={timerOffset}
                                                            />
                                                        </svg>
                                                        <div className="absolute inset-0 flex flex-col items-center justify-center">
                                                            <div className={`text-5xl font-mono font-bold tracking-tighter ${timerActive ? 'text-vabuuk-saffron' : ''}`}>
                                                                {formatTime(timeLeft)}
                                                            </div>
                                                            <span className="text-[9px] font-mono opacity-30 mt-1 tracking-widest">
                                                                {timerActive ? 'DEEP WORK' : 'READY'}
                                                            </span>
                                                        </div>
                                                    </div>

                                                    <div className="flex flex-col items-center gap-4">
                                                        <button
                                                            onClick={() => {
                                                                if (!timerActive && timeLeft === 0) setTimeLeft(25 * 60);
                                                                setTimerActive(!timerActive);
                                                            }}
                                                            className={`px-10 py-3.5 rounded-full font-bold uppercase tracking-[0.15em] text-xs transition-all duration-300 ${timerActive
                                                                ? 'bg-red-500/90 hover:bg-red-600 text-white shadow-[0_0_20px_rgba(239,68,68,0.3)]'
                                                                : 'bg-vabuuk-saffron hover:bg-vabuuk-saffron_glow text-white shadow-[0_0_20px_rgba(217,119,6,0.3)] hover:shadow-[0_0_30px_rgba(217,119,6,0.4)]'
                                                            }`}
                                                        >
                                                            {timerActive ? T.btn_stop_timer : T.btn_start_timer}
                                                        </button>
                                                        {!timerActive && timeLeft < 25 * 60 && timeLeft > 0 && (
                                                            <button onClick={() => setTimeLeft(25 * 60)}
                                                                className="text-[10px] font-mono opacity-40 hover:opacity-100 hover:text-vabuuk-saffron transition">
                                                                Reset Timer
                                                            </button>
                                                        )}
                                                    </div>
                                                </div>
                                            ) : (
                                                <div className="space-y-4">
                                                    <textarea
                                                        className={`w-full rounded-xl p-5 min-h-[160px] text-sm focus:outline-none transition-all duration-300 resize-none ${isNight
                                                            ? 'bg-black/20 border border-white/10 text-white placeholder-white/20 focus:border-vabuuk-saffron/50'
                                                            : 'bg-white/50 border border-black/10 text-vabuuk-void placeholder-black/20 focus:border-vabuuk-saffron/50'
                                                        }`}
                                                        placeholder={currentModule.exercise.placeholder?.[lang] || T.exercise_placeholder}
                                                        value={exerciseInput}
                                                        onChange={(e) => setExerciseInput(e.target.value)}
                                                    />
                                                    {exerciseInput.trim() && (
                                                        <div className="text-right text-[10px] font-mono opacity-30">
                                                            {exerciseInput.trim().split(/\s+/).length} words
                                                        </div>
                                                    )}
                                                    <div className="flex flex-col sm:flex-row justify-between items-center gap-3 pt-2">
                                                        {completedWeeks.includes(activeWeek) && activeWeek < 4 && (
                                                            <button onClick={goToNextWeek}
                                                                className={`flex items-center gap-2 text-xs font-mono opacity-50 hover:opacity-100 hover:text-vabuuk-saffron transition px-3 py-1.5 rounded-lg ${isNight ? 'hover:bg-white/5' : 'hover:bg-black/5'}`}>
                                                                {T.btn_next} <Icon name="arrow-right" size={13} />
                                                            </button>
                                                        )}
                                                        <div className="flex-1" />
                                                        <button
                                                            onClick={() => completeWeek(activeWeek)}
                                                            disabled={!exerciseInput.trim() && !completedWeeks.includes(activeWeek)}
                                                            className={`px-7 py-3 rounded-full font-bold uppercase tracking-[0.12em] text-[11px] flex items-center gap-2.5 transition-all duration-300 ${
                                                                completedWeeks.includes(activeWeek)
                                                                    ? 'bg-green-500/10 text-green-400 border border-green-500/20 hover:bg-green-500/20'
                                                                    : !exerciseInput.trim()
                                                                        ? (isNight ? 'bg-white/5 text-white/20 cursor-not-allowed' : 'bg-black/5 text-black/20 cursor-not-allowed')
                                                                        : 'bg-vabuuk-saffron text-white shadow-[0_0_20px_rgba(217,119,6,0.3)] hover:shadow-[0_0_30px_rgba(217,119,6,0.4)] hover:scale-[1.02] active:scale-[0.98]'
                                                            }`}
                                                        >
                                                            {completedWeeks.includes(activeWeek) ? (
                                                                <><Icon name="check-circle" size={14} /> {exerciseInput.trim() ? T.btn_update : T.btn_completed}</>
                                                            ) : (
                                                                <><Icon name="arrow-right" size={14} /> {T.btn_complete}</>
                                                            )}
                                                        </button>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    </section>
                                </Reveal>

                                {/* Footer */}
                                <footer className={`mt-20 pt-8 border-t text-center ${isNight ? 'border-white/5' : 'border-black/5'}`}>
                                    <Reveal>
                                        <a href="/" className="inline-block group">
                                            <div className="w-10 h-10 bg-vabuuk-saffron mx-auto rounded-full flex items-center justify-center text-white font-serif font-bold text-xl mb-5 shadow-[0_0_15px_rgba(217,119,6,0.3)] group-hover:rotate-45 transition-transform duration-500">V</div>
                                        </a>
                                        <p className={`text-base font-serif italic opacity-50 mb-6 ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                            "{T.footer_motto}"
                                        </p>
                                        <div className="flex justify-center gap-5 opacity-25 mb-6">
                                            {['youtube', 'facebook', 'instagram'].map(social => (
                                                <span key={social} className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition">
                                                    <Icon name={social} size={18} />
                                                </span>
                                            ))}
                                        </div>
                                        <p className="text-[9px] font-mono uppercase tracking-[0.3em] opacity-15">&copy; 2026 VABUUK Academy. Dhaka.</p>
                                    </Reveal>
                                </footer>
                            </div>
                        </main>
                    </div>

                    {/* FOMO NOTIFICATION */}
                    {fomo && (
                        <div className="fixed bottom-5 left-5 z-50 animate-fade-up pointer-events-none">
                            <div className={`px-4 py-3 rounded-xl flex items-center gap-3 shadow-2xl border backdrop-blur-xl ${isNight ? 'bg-vabuuk-void/90 border-white/[0.08]' : 'bg-white/90 border-black/[0.06]'}`}>
                                <span className="relative flex h-2 w-2">
                                    <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75" />
                                    <span className="relative inline-flex rounded-full h-2 w-2 bg-green-500" />
                                </span>
                                <div className="text-[11px]">
                                    <p className="opacity-50 font-mono">
                                        <span className="text-vabuuk-saffron font-bold">{fomo.name}</span>
                                    </p>
                                    <p className={`font-bold font-serif ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                        {T.fomo_action} <span className="text-vabuuk-saffron">{fomo.week}</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        
 window.AcademyView = AcademyView;
})();
</script>
<script type="text/babel">
(function(){

        const { useState, useEffect, useRef, useMemo, useCallback } = React;

        // ============================================================
        // 1. DATA REPOSITORY (THE ARCHIVE)
        // ============================================================

        const TRANSLATIONS = {
            en: {
                library_title: "The Athenaeum",
                library_sub: "A curated pharmacy for the modern soul.",
                filter_all: "All Artifacts",
                filter_read: "Manuscripts",
                filter_watch: "Visuals",
                filter_listen: "Audio",
                axis_architect: "The Architect (Logic)",
                axis_boatman: "The Boatman (Faith)",
                search_placeholder: "Search for wisdom...",
                bookmark_empty: "Your shelf is empty.",
                reading_time: "min",
                modal_close: "Close Artifact",
                random_wisdom: "Serendipity",
                fomo_reading: "is studying",
                fomo_listening: "is listening to",
                fomo_watching: "is watching",
                fomo_location: ["Dhaka", "Chittagong", "Sylhet", "Rajshahi", "London", "New York", "Toronto", "Berlin"],
                back_home: "Sanctuary",
                stats_read: "Read",
                stats_saved: "Saved",
                stats_total: "Total",
                mark_read: "Mark as Read",
                marked_read: "Completed",
                share: "Share",
                copied: "Link Copied!",
                related: "You Might Also Like",
                nav_manifesto: "Manifesto",
                nav_academy: "Academy",
                nav_library: "Library",
                no_results: "The archives are silent on this matter.",
                no_results_sub: "Try a different search or broaden your filters.",
                keyboard_hint: "Press ESC to close",
            },
            bn: {
                library_title: "পাঠাগার",
                library_sub: "আধুনিক মনের জন্য একটি কিউরেটেড ফার্মেসি।",
                filter_all: "সকল সংগ্রহ",
                filter_read: "পাণ্ডুলিপি",
                filter_watch: "ভিজ্যুয়াল",
                filter_listen: "অডিও",
                axis_architect: "স্থপতি (যুক্তি)",
                axis_boatman: "মাঝি (বিশ্বাস)",
                search_placeholder: "জ্ঞানের সন্ধান করুন...",
                bookmark_empty: "আপনার তাক খালি।",
                reading_time: "মিনিট",
                modal_close: "বন্ধ করুন",
                random_wisdom: "দৈবচয়ন",
                fomo_reading: "পড়ছেন",
                fomo_listening: "শুনছেন",
                fomo_watching: "দেখছেন",
                fomo_location: ["ঢাকা", "চট্টগ্রাম", "সিলেট", "রাজশাহী", "লন্ডন", "নিউ ইয়র্ক", "টরন্টো", "বার্লিন"],
                back_home: "অভয়ারণ্য",
                stats_read: "পঠিত",
                stats_saved: "সংরক্ষিত",
                stats_total: "মোট",
                mark_read: "পঠিত হিসেবে চিহ্নিত করুন",
                marked_read: "সম্পন্ন",
                share: "শেয়ার",
                copied: "লিংক কপি হয়েছে!",
                related: "আরও পড়ুন",
                nav_manifesto: "ম্যানিফেস্টো",
                nav_academy: "একাডেমি",
                nav_library: "লাইব্রেরি",
                no_results: "এই বিষয়ে সংগ্রহে কিছু নেই।",
                no_results_sub: "অন্য কিছু খুঁজুন বা ফিল্টার পরিবর্তন করুন।",
                keyboard_hint: "বন্ধ করতে ESC চাপুন",
            }
        };

        const RESOURCES = [
            {
                id: 1, type: "read", axis: "architect",
                title: { en: "The Digital Stoic", bn: "ডিজিটাল স্টোইসিজম" },
                author: "Sazid Hossain", time: 12,
                tags: ["Philosophy", "Discipline", "Stoicism"],
                cover: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Applying ancient stoicism to modern algorithmic addiction. A framework for reclaiming attention in the age of infinite scroll.", bn: "আধুনিক অ্যালগরিদমিক আসক্তিতে প্রাচীন স্টোইসিজমের প্রয়োগ।" },
                content: { en: "In an age where algorithms decide what you see, think, and desire, the Stoic framework offers a radical alternative: voluntary discomfort. Marcus Aurelius didn't have a smartphone, but his meditations on attention, discipline, and the fleeting nature of pleasure are more relevant now than ever.\n\nThe Digital Stoic doesn't reject technology—they master it. They understand that every notification is a negotiation for their attention, and they choose their battles wisely.\n\nKey principles:\n• Attention Audit — Track where your mind goes for 48 hours\n• The Dopamine Fast — Scheduled periods of zero stimulation\n• Voluntary Discomfort — Cold showers, digital detox, deep reading\n• Evening Review — Marcus Aurelius-style daily reflection\n\nThe goal is not to become a monk, but to become the architect of your own mental landscape.", bn: "যেখানে অ্যালগরিদম নির্ধারণ করে আপনি কী দেখবেন, ভাববেন এবং চাইবেন, সেখানে স্টোইক কাঠামো একটি আমূল বিকল্প প্রদান করে: স্বেচ্ছামূলক অস্বস্তি।" }
            },
            {
                id: 2, type: "watch", axis: "boatman",
                title: { en: "Silence & The Soul", bn: "নীরবতা ও আত্মা" },
                author: "Vabuuk Media", time: 18,
                tags: ["Spirituality", "Peace", "Meditation"],
                cover: "https://images.unsplash.com/photo-1518063319789-7217e6706b04?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Why silence is not empty, but full of answers. A cinematic exploration of inner stillness.", bn: "কেন নীরবতা শূন্য নয়, বরং উত্তরে পরিপূর্ণ।" },
                content: { en: "This visual essay takes you on a journey through silence—not the absence of sound, but the presence of something deeper. From Sufi meditation chambers in Istanbul to Buddhist temples in Kyoto, we explore how every great wisdom tradition placed silence at the center of understanding.\n\nModern neuroscience confirms what the mystics knew: silence regenerates brain cells, reduces cortisol, and unlocks creative problem-solving that noise cannot.\n\nFeatured segments:\n• The Architecture of Quiet Spaces\n• Brain Scans in Silence vs. Noise\n• A Day with the Silent Monks of Bandarban\n• Building Your Personal Silence Practice", bn: "এই ভিজ্যুয়াল প্রবন্ধ আপনাকে নীরবতার মধ্য দিয়ে একটি যাত্রায় নিয়ে যায়।" }
            },
            {
                id: 3, type: "read", axis: "bridge",
                title: { en: "The Logic of Faith", bn: "বিশ্বাসের যুক্তি" },
                author: "Nexus Core", time: 8,
                tags: ["Synthesis", "Theology", "Philosophy"],
                cover: "https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Deconstructing the false dichotomy between science and god. The bridge that connects reason and reverence.", bn: "বিজ্ঞান এবং ঈশ্বরের মধ্যে মিথ্যা দ্বন্দ্বের বিনির্মাণ।" },
                content: { en: "The loudest voices in the room often present a false binary: either you believe in science, or you believe in God. This manuscript dismantles that framework using the Steelman Method—presenting both sides in their strongest possible form before finding the synthesis.\n\nWe examine how Ibn Sina reconciled empiricism with Islamic philosophy, how Newton saw mathematics as the language of God, and how modern physicists like John Polkinghorne bridge quantum mechanics and theology.\n\nThe conclusion? The dichotomy was always artificial. Logic and faith are not opponents—they are complementary tools for navigating existence.", bn: "সবচেয়ে জোরে কথা বলা কণ্ঠগুলো প্রায়ই একটি মিথ্যা দ্বৈততা উপস্থাপন করে।" }
            },
            {
                id: 4, type: "listen", axis: "boatman",
                title: { en: "Midnight Monologues", bn: "মধ্যরাতের আলাপ" },
                author: "Sazid Hossain", time: 45,
                tags: ["Podcast", "Reflection", "Existentialism"],
                cover: "https://images.unsplash.com/photo-1478737270239-2f02b77ac618?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Raw, unedited thoughts on existence and purpose. Late-night reflections from the edge of consciousness.", bn: "অস্তিত্ব এবং উদ্দেশ্য নিয়ে কাঁচা, অসম্পাদিত চিন্তা।" },
                content: { en: "Recorded between 2 AM and 4 AM over six months, Midnight Monologues captures the thoughts that only emerge when the world goes quiet. No script. No editing. Just a microphone and the truth.\n\nEpisode topics include:\n• Why do we fear silence more than noise?\n• The difference between loneliness and solitude\n• What Rumi meant by 'the wound is where the light enters'\n• Conversations with a rickshaw puller about meaning\n• The 3 AM question: Are you living or just existing?\n\nThis is not polished content—it's raw thought, and that's exactly the point.", bn: "ছয় মাস ধরে রাত ২টা থেকে ৪টার মধ্যে রেকর্ড করা।" }
            },
            {
                id: 5, type: "read", axis: "architect",
                title: { en: "Deep Work Protocols", bn: "গভীর কাজের নিয়মাবলী" },
                author: "Cal Newport (Analysis)", time: 15,
                tags: ["Productivity", "Focus", "Discipline"],
                cover: "https://images.unsplash.com/photo-1506784983877-45594efa4cbe?auto=format&fit=crop&w=600&q=80",
                desc: { en: "How to survive in a distracted economy. A protocol-based approach to reclaiming cognitive sovereignty.", bn: "বিক্ষিপ্ত অর্থনীতিতে কীভাবে টিকে থাকা যায়।" },
                content: { en: "Cal Newport's Deep Work thesis is simple: the ability to perform focused work is becoming rare and valuable simultaneously. In a world of open-plan offices and constant Slack notifications, the person who can concentrate for 4 uninterrupted hours has a superpower.\n\nThis analysis breaks down Newport's framework into actionable Bengali context:\n\nProtocol 1: The Monk Mode Sprint — 90-minute blocks with zero interruption\nProtocol 2: The Shutdown Ritual — A precise end-of-day routine that tells your brain 'work is done'\nProtocol 3: The Productive Meditation — Walking and thinking about a single problem\nProtocol 4: The Social Media Audit — Applying the craftsman approach to tool selection\n\nEvery protocol includes a 7-day implementation guide designed for the Dhaka lifestyle.", bn: "ক্যাল নিউপোর্টের ডিপ ওয়ার্ক থিসিস সরল: মনোযোগী কাজ করার ক্ষমতা একই সাথে বিরল এবং মূল্যবান হচ্ছে।" }
            },
            {
                id: 6, type: "watch", axis: "bridge",
                title: { en: "The Bengali Renaissance", bn: "বাঙালির রেনেসাঁ" },
                author: "History Dept", time: 25,
                tags: ["History", "Culture", "Identity"],
                cover: "https://images.unsplash.com/photo-1461360370896-922624d12aa1?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Lessons from Rabindranath and Nazrul for Gen Z. History's bridge between tradition and revolution.", bn: "জেনারেশন জেড-এর জন্য রবীন্দ্রনাথ ও নজরুলের শিক্ষা।" },
                content: { en: "The Bengal Renaissance wasn't just a historical period—it was a prototype for exactly what we're trying to do at Vabuuk. Rammohan Roy questioned blind tradition using logic. Rabindranath Tagore found universal spirituality in local culture. Kazi Nazrul Islam refused to choose between rebellion and devotion.\n\nThis documentary asks: What would these thinkers do with Instagram? How would Tagore handle algorithmic content? Would Nazrul start a podcast or lead a protest?\n\nFeaturing rare archival footage, modern re-enactments, and interviews with contemporary Bengali intellectuals.", bn: "বাংলা রেনেসাঁ শুধু একটি ঐতিহাসিক যুগ ছিল না—এটি ছিল ঠিক আমরা যা করতে চাইছি তার একটি প্রোটোটাইপ।" }
            },
            {
                id: 7, type: "listen", axis: "architect",
                title: { en: "Algorithm vs. Free Will", bn: "অ্যালগরিদম বনাম মুক্ত চিন্তা" },
                author: "Nexus AI", time: 30,
                tags: ["Tech", "Ethics", "AI"],
                cover: "https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Are your thoughts your own, or just predicted patterns? An uncomfortable inquiry into digital determinism.", bn: "আপনার চিন্তা কি আপনার নিজের, নাকি শুধু পূর্বাভাসিত প্যাটার্ন?" },
                content: { en: "When Spotify knows your mood before you do, when YouTube predicts your next click with 87% accuracy, when TikTok's algorithm can identify your personality type in 40 minutes of usage—the question of free will becomes urgent, not philosophical.\n\nThis podcast features:\n• An AI researcher explaining how recommendation algorithms model human desire\n• A philosopher arguing that free will is compatible with determinism\n• A former Facebook data scientist on the attention extraction economy\n• A Sufi teacher on the difference between impulse and genuine choice\n\nThe conversation you need to have before you scroll again.", bn: "যখন Spotify আপনার আগেই আপনার মেজাজ জানে, তখন মুক্ত ইচ্ছার প্রশ্নটি জরুরি হয়ে ওঠে।" }
            },
            {
                id: 8, type: "read", axis: "boatman",
                title: { en: "The Art of Letting Go", bn: "ছেড়ে দেওয়ার শিল্প" },
                author: "Rumi (Trans.)", time: 10,
                tags: ["Sufism", "Healing", "Poetry"],
                cover: "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=600&q=80",
                desc: { en: "Timeless wisdom on attachment and loss. Rumi's poetry reinterpreted for the modern wounded soul.", bn: "সংযুক্তি এবং ক্ষতি নিয়ে চিরন্তন জ্ঞান।" },
                content: { en: "Jalal ad-Din Muhammad Rumi wrote in the 13th century, but his words hit harder in the 21st. In a world optimized for attachment—to likes, to relationships, to outcomes—his message of radical surrender feels revolutionary.\n\nThis collection features 12 selected poems with modern Bengali translations and commentary:\n\n'The wound is the place where the Light enters you.'\n'What you seek is seeking you.'\n'Don't grieve. Anything you lose comes round in another form.'\n\nEach poem is paired with a reflection exercise designed to help you practice the ancient art of letting go—not as weakness, but as the ultimate act of strength.", bn: "জালাল উদ্দিন মুহাম্মদ রুমি ত্রয়োদশ শতাব্দীতে লিখেছিলেন, কিন্তু তাঁর কথা একবিংশ শতাব্দীতে আরও জোরে আঘাত করে।" }
            },
        ];

        // ============================================================
        // 2. UTILITY HOOKS & COMPONENTS
        // ============================================================

        // Icon component with Lucide
        const Icon = ({ name, size = 20, className = '', fill = 'none', strokeWidth = 2 }) => {
            const ref = useRef(null);
            useEffect(() => {
                if (ref.current && window.lucide) {
                    ref.current.innerHTML = '';
                    const iconNode = document.createElement('i');
                    iconNode.setAttribute('data-lucide', name);
                    iconNode.setAttribute('width', size);
                    iconNode.setAttribute('height', size);
                    if (fill !== 'none') iconNode.setAttribute('fill', fill);
                    iconNode.setAttribute('stroke-width', strokeWidth);
                    ref.current.appendChild(iconNode);
                    window.lucide.createIcons({ nodes: [iconNode] });
                }
            }, [name, size, fill, strokeWidth]);
            return <span ref={ref} className={`inline-flex items-center justify-center ${className}`} />;
        };

        // Intersection Observer reveal
        const Reveal = ({ children, delay = 0, className = '' }) => {
            const ref = useRef(null);
            const [visible, setVisible] = useState(false);
            useEffect(() => {
                const observer = new IntersectionObserver(
                    ([entry]) => { if (entry.isIntersecting) { setVisible(true); observer.disconnect(); } },
                    { threshold: 0.08, rootMargin: '0px 0px -40px 0px' }
                );
                if (ref.current) observer.observe(ref.current);
                return () => observer.disconnect();
            }, []);
            return (
                <div ref={ref} className={`transition-all duration-700 ${visible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'} ${className}`} style={{ transitionDelay: `${delay}ms` }}>
                    {children}
                </div>
            );
        };

        // Kinetic 3D Card
        const Card3D = ({ children, intensity = 6 }) => {
            const cardRef = useRef(null);
            const handleMouseMove = useCallback((e) => {
                const card = cardRef.current;
                if (!card) return;
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = ((y - centerY) / centerY) * -intensity;
                const rotateY = ((x - centerX) / centerX) * intensity;
                card.style.transform = `perspective(800px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
            }, [intensity]);
            const handleMouseLeave = useCallback(() => {
                if (cardRef.current) {
                    cardRef.current.style.transform = 'perspective(800px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                }
            }, []);
            return (
                <div ref={cardRef} onMouseMove={handleMouseMove} onMouseLeave={handleMouseLeave}
                    className="transition-transform duration-500 ease-out transform-gpu h-full will-change-transform">
                    {children}
                </div>
            );
        };

        // Audio Waveform
        const AudioVisualizer = ({ playing = true }) => (
            <div className="flex items-center justify-center gap-[3px] h-10">
                {[...Array(12)].map((_, i) => (
                    <div key={i} className="wave-bar"
                        style={{
                            animationDelay: `${i * 0.08}s`,
                            animationPlayState: playing ? 'running' : 'paused',
                            height: `${Math.random() * 18 + 6}px`
                        }}
                    />
                ))}
            </div>
        );

        // Reading stats badge
        const StatBadge = ({ icon, value, label, nightMode }) => (
            <div className={`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs ${nightMode ? 'bg-white/5' : 'bg-black/5'}`}>
                <Icon name={icon} size={13} className="opacity-50" />
                <span className="font-bold font-mono">{value}</span>
                <span className="opacity-50">{label}</span>
            </div>
        );

        // ============================================================
        // 3. MAIN APPLICATION
        // ============================================================

        function LibraryView() {
            // --- State ---
            const [lang, setLang] = useState('en');
            const [filterType, setFilterType] = useState('all');
            const [filterAxis, setFilterAxis] = useState('all');
            const [bookmarks, setBookmarks] = useState([]);
            const [readItems, setReadItems] = useState([]);
            const [search, setSearch] = useState('');
            const [timeMode, setTimeMode] = useState('night');
            const [selectedItem, setSelectedItem] = useState(null);
            const [fomo, setFomo] = useState(null);
            const [scrollProgress, setScrollProgress] = useState(0);
            const [showBookmarkPanel, setShowBookmarkPanel] = useState(false);
            const [copied, setCopied] = useState(false);
            const [audioPlaying, setAudioPlaying] = useState(false);
            const [searchFocused, setSearchFocused] = useState(false);
            const searchRef = useRef(null);

            const T = TRANSLATIONS[lang];

            // --- Chrono-Logic (Day/Night) ---
            useEffect(() => {
                const hour = new Date().getHours();
                setTimeMode((hour >= 6 && hour < 18) ? 'day' : 'night');
            }, []);

            // --- Persistence ---
            useEffect(() => {
                try {
                    const saved = localStorage.getItem('vabuuk_bookmarks');
                    const savedLang = localStorage.getItem('vabuuk_lang');
                    const savedRead = localStorage.getItem('vabuuk_read');
                    if (saved) setBookmarks(JSON.parse(saved));
                    if (savedLang) setLang(savedLang);
                    if (savedRead) setReadItems(JSON.parse(savedRead));
                } catch (e) { /* silent fail */ }
            }, []);

            useEffect(() => {
                localStorage.setItem('vabuuk_bookmarks', JSON.stringify(bookmarks));
            }, [bookmarks]);

            useEffect(() => {
                localStorage.setItem('vabuuk_lang', lang);
            }, [lang]);

            useEffect(() => {
                localStorage.setItem('vabuuk_read', JSON.stringify(readItems));
            }, [readItems]);

            // --- Scroll Progress ---
            useEffect(() => {
                const handleScroll = () => {
                    const scrollTop = window.scrollY;
                    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                    setScrollProgress(docHeight > 0 ? (scrollTop / docHeight) * 100 : 0);
                };
                window.addEventListener('scroll', handleScroll, { passive: true });
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            // --- Keyboard Shortcuts ---
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'Escape') {
                        if (selectedItem) setSelectedItem(null);
                        if (showBookmarkPanel) setShowBookmarkPanel(false);
                    }
                    if (e.key === '/' && !selectedItem && document.activeElement.tagName !== 'INPUT') {
                        e.preventDefault();
                        searchRef.current?.focus();
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [selectedItem, showBookmarkPanel]);

            // --- Lock body scroll when modal is open ---
            useEffect(() => {
                if (selectedItem) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                    setAudioPlaying(false);
                }
                return () => { document.body.style.overflow = ''; };
            }, [selectedItem]);

            // --- FOMO Engine ---
            useEffect(() => {
                const showFomo = () => {
                    const loc = T.fomo_location[Math.floor(Math.random() * T.fomo_location.length)];
                    const res = RESOURCES[Math.floor(Math.random() * RESOURCES.length)];
                    const action = res.type === 'listen' ? T.fomo_listening : res.type === 'watch' ? T.fomo_watching : T.fomo_reading;
                    setFomo({ loc, action, title: res.title[lang] });
                    setTimeout(() => setFomo(null), 5000);
                };
                const timeout = setTimeout(showFomo, 8000);
                const interval = setInterval(showFomo, 18000);
                return () => { clearTimeout(timeout); clearInterval(interval); };
            }, [lang, T]);

            // --- Filter Logic ---
            const filteredResources = useMemo(() => {
                return RESOURCES.filter(item => {
                    const matchType = filterType === 'all' || item.type === filterType;
                    const matchAxis = filterAxis === 'all' || item.axis === filterAxis || item.axis === 'bridge';
                    const q = search.toLowerCase();
                    const matchSearch = !q ||
                        item.title[lang].toLowerCase().includes(q) ||
                        item.author.toLowerCase().includes(q) ||
                        item.tags.some(t => t.toLowerCase().includes(q)) ||
                        (item.desc[lang] || item.desc.en || '').toLowerCase().includes(q);
                    return matchType && matchAxis && matchSearch;
                });
            }, [filterType, filterAxis, search, lang]);

            // --- Actions ---
            const toggleBookmark = useCallback((id, e) => {
                if (e) e.stopPropagation();
                setBookmarks(prev => prev.includes(id) ? prev.filter(b => b !== id) : [...prev, id]);
            }, []);

            const toggleRead = useCallback((id) => {
                setReadItems(prev => prev.includes(id) ? prev.filter(r => r !== id) : [...prev, id]);
            }, []);

            const handleRandom = useCallback(() => {
                const random = RESOURCES[Math.floor(Math.random() * RESOURCES.length)];
                setSelectedItem(random);
            }, []);

            const handleShare = useCallback(() => {
                const url = window.location.href;
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(url).then(() => {
                        setCopied(true);
                        setTimeout(() => setCopied(false), 2000);
                    });
                }
            }, []);

            const getRelated = useCallback((item) => {
                return RESOURCES.filter(r => r.id !== item.id && (r.axis === item.axis || r.tags.some(t => item.tags.includes(t)))).slice(0, 3);
            }, []);

            // --- Dynamic Styles ---
            const isNight = timeMode === 'night';
            const bgClass = isNight ? 'bg-vabuuk-void_deep text-vabuuk-paper' : 'bg-vabuuk-paper text-vabuuk-void';
            const cardClass = isNight ? 'glass-panel glass-panel-hover' : 'light-glass light-glass-hover';
            const navBg = isNight ? 'bg-vabuuk-void_deep/80' : 'bg-vabuuk-paper/80';

            // --- Type icon map ---
            const typeIcon = { read: 'book-open', watch: 'play-circle', listen: 'headphones' };
            const axisColor = { architect: 'border-slate-500/50 text-slate-400', boatman: 'border-blue-400/50 text-blue-300', bridge: 'border-vabuuk-saffron/50 text-vabuuk-saffron' };
            const axisLabel = { architect: 'LOGIC', boatman: 'FAITH', bridge: 'BRIDGE' };

            return (
                <div className={`min-h-screen relative ${bgClass} font-sans transition-colors duration-700`}>

                    {/* SCROLL PROGRESS BAR */}
                    <div className="scroll-progress" style={{ width: `${scrollProgress}%` }} />

                    {/* AMBIENT PARTICLES */}
                    <div className="fixed inset-0 pointer-events-none overflow-hidden z-0">
                        <div className={`absolute top-[-10%] left-1/2 -translate-x-1/2 w-[70vw] h-[70vw] rounded-full blur-[160px] ${isNight ? 'bg-vabuuk-saffron opacity-[0.06] animate-pulse-slow' : 'bg-vabuuk-gold opacity-[0.12]'}`} />
                        <div className={`absolute bottom-[-20%] right-[-10%] w-[50vw] h-[50vw] rounded-full blur-[120px] ${isNight ? 'bg-blue-900 opacity-[0.04]' : 'bg-blue-200 opacity-[0.08]'}`} />
                        {/* Floating Dust */}
                        {isNight && (
                            <>
                                <div className="absolute w-[2px] h-[2px] bg-vabuuk-saffron rounded-full animate-dust opacity-40" style={{ top: '20%', left: '15%', animationDuration: '18s' }} />
                                <div className="absolute w-[1.5px] h-[1.5px] bg-white rounded-full animate-dust opacity-25" style={{ top: '60%', left: '45%', animationDuration: '22s', animationDelay: '3s' }} />
                                <div className="absolute w-[2px] h-[2px] bg-vabuuk-saffron rounded-full animate-dust opacity-30" style={{ top: '40%', left: '75%', animationDuration: '25s', animationDelay: '7s' }} />
                                <div className="absolute w-[1px] h-[1px] bg-white rounded-full animate-dust opacity-20" style={{ top: '80%', left: '25%', animationDuration: '20s', animationDelay: '10s' }} />
                            </>
                        )}
                        {/* Grain */}
                        <div className="absolute inset-0 bg-grain opacity-30 mix-blend-overlay" />
                    </div>

                    {/* ===================== NAVIGATION ===================== */}
                    <nav className={`relative z-50 px-4 md:px-8 py-4 flex justify-between items-center border-b ${isNight ? 'border-white/5' : 'border-black/5'} backdrop-blur-xl sticky top-0 transition-all duration-300 ${navBg}`}>
                        {/* Left: Logo + Back */}
                        <div className="flex items-center gap-4">
                            <a href="/" className="flex items-center gap-3 group" title="Back to Sanctuary">
                                <div className="w-9 h-9 bg-vabuuk-saffron text-white flex items-center justify-center rounded-lg font-serif font-bold text-lg shadow-[0_0_12px_rgba(217,119,6,0.25)] group-hover:rotate-45 transition-transform duration-500">V</div>
                                <div className="hidden md:block">
                                    <h1 className={`font-serif font-bold text-lg tracking-wider uppercase leading-none ${isNight ? 'text-white' : 'text-vabuuk-void'}`}>VABUUK</h1>
                                    <p className="text-[8px] tracking-[0.3em] uppercase opacity-50 font-mono">The Athenaeum</p>
                                </div>
                            </a>
                            <span className={`hidden md:block h-6 w-px ${isNight ? 'bg-white/10' : 'bg-black/10'}`} />
                            <div className="hidden md:flex items-center gap-5 text-xs font-medium tracking-wide opacity-60">
                                <a href="/" className="hover:text-vabuuk-saffron hover:opacity-100 transition">{T.back_home}</a>
                                <a href="#" className="hover:text-vabuuk-saffron hover:opacity-100 transition">{T.nav_manifesto}</a>
                                <a href="#" className="hover:text-vabuuk-saffron hover:opacity-100 transition">{T.nav_academy}</a>
                                <a href="#" className="text-vabuuk-saffron opacity-100 font-bold">{T.nav_library}</a>
                            </div>
                        </div>

                        {/* Center: Search */}
                        <div className="flex-1 max-w-md mx-4 md:mx-8">
                            <div className={`relative flex items-center px-4 py-2 rounded-full border transition-all duration-300 ${searchFocused ? (isNight ? 'bg-white/10 border-vabuuk-saffron/40 shadow-[0_0_15px_rgba(217,119,6,0.1)]' : 'bg-black/5 border-vabuuk-saffron shadow-[0_0_10px_rgba(217,119,6,0.08)]') : (isNight ? 'bg-white/[0.03] border-white/[0.06] hover:bg-white/[0.06]' : 'bg-black/[0.03] border-black/[0.04] hover:bg-black/[0.06]')}`}>
                                <Icon name="search" className="opacity-40 mr-2 flex-shrink-0" size={15} />
                                <input
                                    ref={searchRef}
                                    type="text"
                                    placeholder={T.search_placeholder}
                                    value={search}
                                    onChange={(e) => setSearch(e.target.value)}
                                    onFocus={() => setSearchFocused(true)}
                                    onBlur={() => setSearchFocused(false)}
                                    className="bg-transparent border-none outline-none w-full text-sm font-mono placeholder-current placeholder-opacity-30"
                                />
                                {search && (
                                    <button onClick={() => setSearch('')} className="opacity-40 hover:opacity-100 transition ml-1 flex-shrink-0">
                                        <Icon name="x" size={14} />
                                    </button>
                                )}
                                <span className={`hidden md:block text-[9px] font-mono opacity-20 ml-2 flex-shrink-0 ${searchFocused ? 'hidden' : ''}`}>/</span>
                            </div>
                        </div>

                        {/* Right: Actions */}
                        <div className="flex items-center gap-2">
                            <button onClick={handleRandom}
                                className={`hidden md:flex items-center gap-2 px-4 py-2 text-[10px] font-bold uppercase tracking-widest border rounded-full transition-all duration-300 hover:bg-vabuuk-saffron hover:text-white hover:border-transparent hover:shadow-[0_0_15px_rgba(217,119,6,0.3)] hover:scale-105 active:scale-95 ${isNight ? 'border-white/15' : 'border-black/15'}`}>
                                <Icon name="sparkles" size={13} /> {T.random_wisdom}
                            </button>
                            <button onClick={() => setLang(lang === 'en' ? 'bn' : 'en')}
                                className={`w-9 h-9 rounded-full border flex items-center justify-center font-bold text-[10px] transition-all duration-500 hover:rotate-180 hover:border-vabuuk-saffron ${isNight ? 'border-white/15 opacity-60 hover:opacity-100' : 'border-black/15 opacity-60 hover:opacity-100'}`}>
                                {lang === 'en' ? 'BN' : 'EN'}
                            </button>
                        </div>
                    </nav>

                    {/* ===================== MAIN CONTENT ===================== */}
                    <main className="relative z-10 max-w-7xl mx-auto px-4 md:px-6 py-10 md:py-16">

                        {/* HERO HEADER */}
                        <Reveal>
                            <header className="mb-16 md:mb-20 text-center relative">
                                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-vabuuk-saffron blur-[100px] opacity-15 animate-pulse-slow" />
                                <h2 className={`text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-5 tracking-tight ${lang === 'bn' ? 'font-bengali' : ''} text-gradient-saffron`}>
                                    {T.library_title}
                                </h2>
                                <div className="flex items-center justify-center gap-4 opacity-50 font-mono text-[11px] tracking-[0.2em] uppercase">
                                    <span className={`h-px w-8 ${isNight ? 'bg-white' : 'bg-vabuuk-void'}`} />
                                    <p className={lang === 'bn' ? 'font-bengali tracking-normal' : ''}>{T.library_sub}</p>
                                    <span className={`h-px w-8 ${isNight ? 'bg-white' : 'bg-vabuuk-void'}`} />
                                </div>

                                {/* Stats Row */}
                                <div className="flex justify-center gap-3 mt-8 flex-wrap">
                                    <StatBadge icon="layers" value={RESOURCES.length} label={T.stats_total} nightMode={isNight} />
                                    <StatBadge icon="check-circle" value={readItems.length} label={T.stats_read} nightMode={isNight} />
                                    <StatBadge icon="bookmark" value={bookmarks.length} label={T.stats_saved} nightMode={isNight} />
                                </div>
                            </header>
                        </Reveal>

                        {/* FILTER MATRIX */}
                        <Reveal delay={100}>
                            <div className={`flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6 pb-8 border-b ${isNight ? 'border-white/5' : 'border-black/5'}`}>
                                {/* Type Filters */}
                                <div className="flex gap-2 overflow-x-auto w-full md:w-auto pb-2 scrollbar-hide">
                                    {['all', 'read', 'watch', 'listen'].map(type => (
                                        <button key={type} onClick={() => setFilterType(type)}
                                            className={`relative px-5 py-2 rounded-full text-[10px] font-bold uppercase tracking-[0.15em] transition-all duration-300 whitespace-nowrap flex items-center gap-2 ${filterType === type
                                                ? 'bg-vabuuk-saffron text-white shadow-[0_0_20px_rgba(217,119,6,0.25)]'
                                                : (isNight ? 'bg-white/[0.04] hover:bg-white/[0.08] text-white/70' : 'bg-black/[0.04] hover:bg-black/[0.08] text-black/70')
                                            }`}>
                                            {type !== 'all' && <Icon name={typeIcon[type]} size={12} />}
                                            {T[`filter_${type}`]}
                                            {filterType === type && <span className="ml-1 w-1.5 h-1.5 bg-white rounded-full animate-pulse" />}
                                        </button>
                                    ))}
                                </div>

                                {/* Axis Filters */}
                                <div className={`flex p-1 rounded-xl backdrop-blur-sm border ${isNight ? 'bg-white/[0.03] border-white/[0.06]' : 'bg-black/[0.03] border-black/[0.04]'}`}>
                                    {[
                                        { key: 'architect', icon: 'triangle', label: 'Logic' },
                                        { key: 'all', icon: 'infinity', label: 'All' },
                                        { key: 'boatman', icon: 'waves', label: 'Faith' }
                                    ].map((axis) => (
                                        <button key={axis.key} onClick={() => setFilterAxis(axis.key)}
                                            className={`px-4 py-1.5 rounded-lg text-[10px] font-bold tracking-wider transition-all duration-300 flex items-center gap-1.5 ${filterAxis === axis.key
                                                ? (isNight ? 'bg-white/10 text-white shadow-sm' : 'bg-black/10 text-black shadow-sm')
                                                : 'opacity-40 hover:opacity-80'
                                            }`}>
                                            <Icon name={axis.icon} size={11} />
                                            {axis.label}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </Reveal>

                        {/* BOOKSHELF GRID */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-7 grid-transition">
                            {filteredResources.map((item, index) => (
                                <Reveal key={item.id} delay={index * 80}>
                                    <Card3D>
                                        <div onClick={() => setSelectedItem(item)}
                                            className={`relative group h-full rounded-2xl overflow-hidden cursor-pointer transition-all duration-500 ${cardClass} ${readItems.includes(item.id) ? 'ring-1 ring-green-500/20' : ''}`}>

                                            {/* Image */}
                                            <div className="relative h-52 overflow-hidden">
                                                <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent z-10 transition-opacity duration-500 group-hover:from-black/90" />
                                                <img src={item.cover} loading="lazy" alt={item.title[lang]}
                                                    className="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700" />
                                                <div className="card-glare" />

                                                {/* Type Badge */}
                                                <div className="absolute top-3 left-3 z-20">
                                                    <span className={`backdrop-blur-md text-white text-[8px] font-bold uppercase tracking-[0.15em] px-2.5 py-1 rounded-full border border-white/10 flex items-center gap-1.5 transition-colors ${isNight ? 'bg-black/40' : 'bg-black/50'}`}>
                                                        <Icon name={item.type === 'listen' ? 'headphones' : item.type === 'watch' ? 'play' : 'book-open'} size={9} />
                                                        {item.type.toUpperCase()}
                                                    </span>
                                                </div>

                                                {/* Read Badge */}
                                                {readItems.includes(item.id) && (
                                                    <div className="absolute top-3 left-1/2 -translate-x-1/2 z-20">
                                                        <span className="bg-green-500/80 backdrop-blur-md text-white text-[8px] font-bold uppercase tracking-widest px-2.5 py-1 rounded-full flex items-center gap-1">
                                                            <Icon name="check" size={9} /> Done
                                                        </span>
                                                    </div>
                                                )}

                                                {/* Bookmark Button */}
                                                <button onClick={(e) => toggleBookmark(item.id, e)}
                                                    className={`absolute top-3 right-3 z-20 p-2 rounded-full backdrop-blur-md transition-all duration-300 hover:scale-110 active:scale-95 ${bookmarks.includes(item.id)
                                                        ? 'bg-vabuuk-saffron text-white shadow-[0_0_10px_rgba(217,119,6,0.4)]'
                                                        : 'bg-black/30 text-white/80 hover:bg-white/20'
                                                    }`}>
                                                    <Icon name="bookmark" size={13} fill={bookmarks.includes(item.id) ? 'currentColor' : 'none'} />
                                                </button>

                                                {/* Play overlay for watch/listen */}
                                                {(item.type === 'watch' || item.type === 'listen') && (
                                                    <div className="absolute inset-0 z-10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-400 scale-75 group-hover:scale-100">
                                                        <div className="w-14 h-14 bg-vabuuk-saffron/90 rounded-full flex items-center justify-center text-white shadow-[0_0_30px_rgba(217,119,6,0.4)] backdrop-blur-sm">
                                                            <Icon name="play" size={24} fill="currentColor" />
                                                        </div>
                                                    </div>
                                                )}
                                            </div>

                                            {/* Content */}
                                            <div className="p-5 relative z-20">
                                                <div className="flex justify-between items-center mb-2.5">
                                                    <span className={`text-[8px] font-mono uppercase tracking-[0.15em] px-2 py-0.5 rounded border ${axisColor[item.axis]}`}>
                                                        {axisLabel[item.axis]}
                                                    </span>
                                                    <span className="text-[10px] opacity-40 flex items-center gap-1 font-mono">
                                                        <Icon name="clock" size={10} /> {item.time} {T.reading_time}
                                                    </span>
                                                </div>

                                                <h3 className={`text-base font-serif font-bold mb-2 leading-snug group-hover:text-vabuuk-saffron transition-colors duration-300 line-clamp-2 ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                                    {item.title[lang]}
                                                </h3>

                                                <p className="text-[11px] opacity-50 line-clamp-2 mb-3 font-light leading-relaxed">
                                                    {typeof item.desc === 'string' ? item.desc : (item.desc[lang] || item.desc.en)}
                                                </p>

                                                <div className="flex items-center justify-between">
                                                    <div className="flex flex-wrap gap-1.5">
                                                        {item.tags.slice(0, 2).map(tag => (
                                                            <span key={tag} className={`text-[8px] px-2 py-0.5 rounded-full ${isNight ? 'bg-white/[0.04] border border-white/[0.06]' : 'bg-black/[0.04] border border-black/[0.04]'} opacity-50 hover:opacity-80 transition-opacity`}>
                                                                #{tag}
                                                            </span>
                                                        ))}
                                                    </div>
                                                    <span className="text-[9px] opacity-30 font-mono">{item.author.split(' ')[0]}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </Card3D>
                                </Reveal>
                            ))}
                        </div>

                        {/* EMPTY STATE */}
                        {filteredResources.length === 0 && (
                            <Reveal>
                                <div className="text-center py-24 flex flex-col items-center">
                                    <div className={`w-20 h-20 rounded-full flex items-center justify-center mb-6 ${isNight ? 'bg-white/5' : 'bg-black/5'}`}>
                                        <Icon name="search-x" size={36} className="opacity-30" />
                                    </div>
                                    <p className={`font-serif text-xl mb-2 opacity-50 ${lang === 'bn' ? 'font-bengali' : ''}`}>{T.no_results}</p>
                                    <p className={`text-sm opacity-30 ${lang === 'bn' ? 'font-bengali' : ''}`}>{T.no_results_sub}</p>
                                    <button onClick={() => { setSearch(''); setFilterType('all'); setFilterAxis('all'); }}
                                        className="mt-6 text-vabuuk-saffron text-xs font-bold uppercase tracking-widest hover:underline">
                                        Clear all filters
                                    </button>
                                </div>
                            </Reveal>
                        )}
                    </main>

                    {/* ===================== READING MODAL ===================== */}
                    {selectedItem && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-3 md:p-6">
                            <div className="absolute inset-0 bg-black/85 backdrop-blur-xl modal-backdrop" onClick={() => setSelectedItem(null)} />

                            <div className={`relative w-full max-w-5xl max-h-[92vh] flex flex-col md:flex-row overflow-hidden rounded-2xl md:rounded-3xl shadow-2xl modal-content ${isNight ? 'bg-vabuuk-void border border-white/[0.08]' : 'bg-vabuuk-paper border border-black/[0.08]'}`}>

                                {/* Left: Media/Cover */}
                                <div className="w-full md:w-[38%] relative overflow-hidden flex-shrink-0 h-48 md:h-auto">
                                    <img src={selectedItem.cover} className="w-full h-full object-cover opacity-50 transition-opacity duration-700 hover:opacity-40 scale-105" alt="" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-vabuuk-void via-vabuuk-void/60 to-transparent" />
                                    <div className="absolute inset-0 bg-gradient-to-r from-transparent to-vabuuk-void/30 hidden md:block" />

                                    <div className="absolute bottom-4 left-5 right-5 md:bottom-8 md:left-8 md:right-8 z-10">
                                        <span className="bg-vabuuk-saffron text-white text-[9px] font-bold uppercase px-2.5 py-1 rounded-full mb-3 inline-flex items-center gap-1.5 tracking-[0.15em]">
                                            <Icon name={typeIcon[selectedItem.type]} size={10} />
                                            {selectedItem.type}
                                        </span>
                                        <h2 className={`text-2xl md:text-3xl font-serif font-bold text-white mb-1.5 leading-tight ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                            {selectedItem.title[lang]}
                                        </h2>
                                        <p className="text-white/50 font-mono text-[11px]">{selectedItem.author}</p>
                                    </div>
                                </div>

                                {/* Right: Content */}
                                <div className="w-full md:w-[62%] overflow-y-auto p-5 md:p-10 relative">
                                    {/* Close */}
                                    <button onClick={() => setSelectedItem(null)}
                                        className={`absolute top-4 right-4 p-2 rounded-full transition-all z-50 hover:scale-110 ${isNight ? 'bg-white/5 hover:bg-white/10' : 'bg-black/5 hover:bg-black/10'}`}>
                                        <Icon name="x" size={18} />
                                    </button>

                                    {/* Meta */}
                                    <div className={`flex flex-wrap items-center gap-3 mb-6 text-[11px] opacity-50 font-mono pb-4 border-b ${isNight ? 'border-white/[0.06]' : 'border-black/[0.06]'}`}>
                                        <span className="flex items-center gap-1.5"><Icon name="clock" size={12} /> {selectedItem.time} {T.reading_time}</span>
                                        <span className="opacity-30">|</span>
                                        <span className={`px-2 py-0.5 rounded border ${axisColor[selectedItem.axis]}`}>{axisLabel[selectedItem.axis]}</span>
                                        <span className="opacity-30">|</span>
                                        <span className="flex items-center gap-1.5"><Icon name="tag" size={12} /> {selectedItem.tags.join(', ')}</span>
                                    </div>

                                    {/* Description Quote */}
                                    <blockquote className="text-lg md:text-xl italic opacity-80 border-l-3 border-vabuuk-saffron pl-5 mb-8 leading-relaxed font-light" style={{ borderLeftWidth: '3px' }}>
                                        "{typeof selectedItem.desc === 'string' ? selectedItem.desc : (selectedItem.desc[lang] || selectedItem.desc.en)}"
                                    </blockquote>

                                    {/* Media Player */}
                                    <div className={`my-8 rounded-xl overflow-hidden border ${isNight ? 'border-white/[0.06]' : 'border-black/[0.06]'}`}>
                                        <div className={`p-6 md:p-8 flex flex-col items-center justify-center text-center gap-4 ${isNight ? 'bg-white/[0.02]' : 'bg-black/[0.02]'}`}>
                                            {selectedItem.type === 'watch' && (
                                                <>
                                                    <div className="w-16 h-16 rounded-full flex items-center justify-center text-vabuuk-saffron shadow-[0_0_25px_rgba(217,119,6,0.2)] cursor-pointer hover:scale-110 transition-transform bg-vabuuk-saffron/10 border border-vabuuk-saffron/20">
                                                        <Icon name="play" size={28} fill="currentColor" />
                                                    </div>
                                                    <p className="text-[10px] font-mono tracking-[0.2em] uppercase opacity-40">Start Cinematic Experience</p>
                                                </>
                                            )}
                                            {selectedItem.type === 'listen' && (
                                                <>
                                                    <AudioVisualizer playing={audioPlaying} />
                                                    <div className={`w-full h-1 rounded-full overflow-hidden relative ${isNight ? 'bg-white/10' : 'bg-black/10'}`}>
                                                        <div className="absolute left-0 top-0 h-full w-1/4 bg-vabuuk-saffron rounded-full transition-all duration-300" />
                                                    </div>
                                                    <div className="flex justify-between w-full text-[10px] font-mono opacity-40">
                                                        <span>0:00</span>
                                                        <span>{selectedItem.time}:00</span>
                                                    </div>
                                                    <div className="flex gap-6 items-center">
                                                        <button className="opacity-40 hover:opacity-100 transition"><Icon name="skip-back" size={18} /></button>
                                                        <button onClick={() => setAudioPlaying(!audioPlaying)}
                                                            className="w-11 h-11 bg-vabuuk-saffron rounded-full flex items-center justify-center text-white hover:scale-105 transition shadow-[0_0_15px_rgba(217,119,6,0.3)]">
                                                            <Icon name={audioPlaying ? 'pause' : 'play'} size={18} fill="currentColor" />
                                                        </button>
                                                        <button className="opacity-40 hover:opacity-100 transition"><Icon name="skip-forward" size={18} /></button>
                                                    </div>
                                                </>
                                            )}
                                            {selectedItem.type === 'read' && (
                                                <div className="flex items-center gap-3 opacity-40 py-2">
                                                    <Icon name="book-open" size={24} />
                                                    <p className="font-mono text-[10px] uppercase tracking-[0.2em]">Full Manuscript Below</p>
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    {/* Content Body */}
                                    <div className="prose prose-sm max-w-none">
                                        {(selectedItem.content[lang] || selectedItem.content.en).split('\n\n').map((para, i) => (
                                            <p key={i} className={`mb-4 leading-relaxed opacity-80 font-light text-sm ${para.startsWith('•') ? 'pl-4 opacity-70' : ''}`}>
                                                {para.split('\n').map((line, j) => (
                                                    <span key={j}>{line}{j < para.split('\n').length - 1 && <br />}</span>
                                                ))}
                                            </p>
                                        ))}
                                    </div>

                                    {/* Related Content */}
                                    {getRelated(selectedItem).length > 0 && (
                                        <div className={`mt-10 pt-6 border-t ${isNight ? 'border-white/[0.06]' : 'border-black/[0.06]'}`}>
                                            <h4 className="text-[10px] font-bold uppercase tracking-[0.2em] opacity-40 mb-4">{T.related}</h4>
                                            <div className="flex gap-3 overflow-x-auto pb-2">
                                                {getRelated(selectedItem).map(rel => (
                                                    <button key={rel.id} onClick={() => { setSelectedItem(rel); setAudioPlaying(false); }}
                                                        className={`flex items-center gap-3 p-2.5 rounded-xl min-w-[200px] transition-all hover:scale-[1.02] ${isNight ? 'bg-white/[0.03] hover:bg-white/[0.06] border border-white/[0.05]' : 'bg-black/[0.03] hover:bg-black/[0.06] border border-black/[0.03]'}`}>
                                                        <img src={rel.cover} className="w-10 h-10 rounded-lg object-cover flex-shrink-0" alt="" />
                                                        <div className="text-left min-w-0">
                                                            <p className={`text-xs font-serif font-bold truncate ${lang === 'bn' ? 'font-bengali' : ''}`}>{rel.title[lang]}</p>
                                                            <p className="text-[9px] opacity-40 font-mono uppercase">{rel.type}</p>
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {/* Action Footer */}
                                    <div className={`mt-8 pt-6 border-t flex flex-col sm:flex-row justify-between items-center gap-4 ${isNight ? 'border-white/[0.06]' : 'border-black/[0.06]'}`}>
                                        <div className="flex items-center gap-3">
                                            <button onClick={handleShare}
                                                className={`flex items-center gap-2 text-xs opacity-50 hover:opacity-100 transition px-3 py-1.5 rounded-lg ${isNight ? 'hover:bg-white/5' : 'hover:bg-black/5'}`}>
                                                <Icon name={copied ? 'check' : 'share-2'} size={14} />
                                                {copied ? T.copied : T.share}
                                            </button>
                                            <button onClick={(e) => toggleBookmark(selectedItem.id, e)}
                                                className={`flex items-center gap-2 text-xs opacity-50 hover:opacity-100 transition px-3 py-1.5 rounded-lg ${bookmarks.includes(selectedItem.id) ? 'text-vabuuk-saffron opacity-100' : ''} ${isNight ? 'hover:bg-white/5' : 'hover:bg-black/5'}`}>
                                                <Icon name="bookmark" size={14} fill={bookmarks.includes(selectedItem.id) ? 'currentColor' : 'none'} />
                                                {bookmarks.includes(selectedItem.id) ? T.stats_saved : 'Save'}
                                            </button>
                                        </div>
                                        <button onClick={() => { toggleRead(selectedItem.id); }}
                                            className={`flex items-center gap-2 px-6 py-2.5 rounded-full font-bold text-[10px] tracking-[0.15em] uppercase transition-all duration-300 ${readItems.includes(selectedItem.id)
                                                ? 'bg-green-500/10 text-green-400 border border-green-500/20'
                                                : 'bg-vabuuk-saffron text-white shadow-[0_0_15px_rgba(217,119,6,0.3)] hover:shadow-[0_0_25px_rgba(217,119,6,0.4)] hover:scale-[1.03] active:scale-[0.98]'
                                            }`}>
                                            <Icon name={readItems.includes(selectedItem.id) ? 'check-circle' : 'check'} size={14} />
                                            {readItems.includes(selectedItem.id) ? T.marked_read : T.mark_read}
                                        </button>
                                    </div>

                                    {/* ESC Hint */}
                                    <p className="text-center mt-6 text-[9px] font-mono opacity-20 tracking-widest uppercase hidden md:block">
                                        {T.keyboard_hint}
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ===================== FOMO TICKER ===================== */}
                    {fomo && (
                        <div className="fixed bottom-5 left-5 z-50 animate-fade-up pointer-events-none">
                            <div className={`px-4 py-3 rounded-xl flex items-center gap-3 shadow-2xl border backdrop-blur-xl ${isNight ? 'bg-vabuuk-void/90 border-white/[0.08]' : 'bg-white/90 border-black/[0.06]'}`}>
                                <span className="relative flex h-2 w-2">
                                    <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75" />
                                    <span className="relative inline-flex rounded-full h-2 w-2 bg-green-500" />
                                </span>
                                <div className="text-[11px]">
                                    <p className="opacity-50 font-mono">
                                        <span className="text-vabuuk-saffron font-bold">{fomo.loc}</span> — {fomo.action}
                                    </p>
                                    <p className={`font-bold font-serif truncate max-w-[180px] ${lang === 'bn' ? 'font-bengali' : ''}`}>{fomo.title}</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ===================== BOOKMARK FAB ===================== */}
                    {bookmarks.length > 0 && (
                        <div className="fixed bottom-5 right-5 z-40">
                            <div className="relative">
                                <button onClick={() => setShowBookmarkPanel(!showBookmarkPanel)}
                                    className={`w-12 h-12 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(217,119,6,0.25)] hover:scale-110 active:scale-95 transition-all z-50 ${isNight ? 'bg-vabuuk-void border border-vabuuk-saffron text-vabuuk-saffron' : 'bg-white border border-vabuuk-saffron text-vabuuk-saffron'}`}>
                                    <Icon name="bookmark" size={20} fill="currentColor" />
                                    <span className="absolute -top-1 -right-1 bg-vabuuk-saffron text-white text-[9px] font-bold w-5 h-5 flex items-center justify-center rounded-full shadow-sm">
                                        {bookmarks.length}
                                    </span>
                                </button>

                                {/* Expanded Panel */}
                                {showBookmarkPanel && (
                                    <div className="absolute bottom-full right-0 mb-3 w-72 animate-scale-in origin-bottom-right">
                                        <div className={`rounded-xl shadow-2xl overflow-hidden border ${isNight ? 'bg-vabuuk-void_deep border-white/[0.08]' : 'bg-white border-black/[0.06]'}`}>
                                            <div className={`p-3 border-b flex items-center justify-between ${isNight ? 'border-white/[0.06] bg-white/[0.02]' : 'border-black/[0.04] bg-black/[0.01]'}`}>
                                                <h4 className="text-[10px] font-bold uppercase tracking-[0.15em] text-vabuuk-saffron">Saved Artifacts</h4>
                                                <button onClick={() => setShowBookmarkPanel(false)} className="opacity-40 hover:opacity-100">
                                                    <Icon name="x" size={14} />
                                                </button>
                                            </div>
                                            <div className="max-h-60 overflow-y-auto">
                                                {RESOURCES.filter(r => bookmarks.includes(r.id)).map(saved => (
                                                    <div key={saved.id} onClick={() => { setSelectedItem(saved); setShowBookmarkPanel(false); }}
                                                        className={`flex items-center gap-3 p-3 cursor-pointer transition border-b last:border-0 ${isNight ? 'hover:bg-white/5 border-white/[0.04]' : 'hover:bg-black/[0.03] border-black/[0.03]'}`}>
                                                        <img src={saved.cover} className="w-9 h-9 rounded-lg object-cover flex-shrink-0 opacity-80" alt="" />
                                                        <div className="flex-1 min-w-0">
                                                            <p className={`text-xs font-serif font-bold truncate ${lang === 'bn' ? 'font-bengali' : ''}`}>{saved.title[lang]}</p>
                                                            <p className="text-[9px] opacity-40 font-mono uppercase flex items-center gap-1">
                                                                <Icon name={typeIcon[saved.type]} size={8} /> {saved.type}
                                                                {readItems.includes(saved.id) && <span className="text-green-400 ml-1">Done</span>}
                                                            </p>
                                                        </div>
                                                        <button onClick={(e) => toggleBookmark(saved.id, e)} className="opacity-30 hover:opacity-100 hover:text-red-400 transition p-1">
                                                            <Icon name="x" size={12} />
                                                        </button>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* ===================== FOOTER ===================== */}
                    <footer className={`mt-16 md:mt-24 border-t py-10 md:py-12 text-center relative z-10 ${isNight ? 'border-white/5' : 'border-black/5'}`}>
                        <Reveal>
                            <a href="/" className="inline-block group">
                                <div className="w-10 h-10 bg-vabuuk-saffron mx-auto rounded-full flex items-center justify-center text-white font-serif font-bold text-xl mb-5 shadow-[0_0_15px_rgba(217,119,6,0.3)] group-hover:rotate-45 transition-transform duration-500">V</div>
                            </a>
                            <p className={`text-lg font-serif italic opacity-60 mb-6 max-w-md mx-auto leading-relaxed ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                "ভাবনায় যুক্তি, বিশ্বাসে মুক্তি"
                            </p>
                            <div className="flex justify-center gap-5 opacity-30 mb-6">
                                {['youtube', 'facebook', 'instagram'].map(social => (
                                    <span key={social} className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition">
                                        <Icon name={social} size={18} />
                                    </span>
                                ))}
                            </div>
                            <p className="text-[9px] font-mono uppercase tracking-[0.3em] opacity-20">&copy; 2026 VABUUK Archives. Dhaka.</p>
                        </Reveal>
                    </footer>

                </div>
            );
        }

        // Mount
        
 window.LibraryView = LibraryView;
})();
</script>
<script type="text/babel">

        const { useState, useEffect, useRef } = React;

        // --- 1. DATA LAYER ---
        const TRANSLATIONS = {
            en: {
                nav_manifesto: "The Manifesto",
                nav_academy: "Academy",
                nav_store: "Library",
                hero_title: "Logic in Thought,\nFreedom in Belief.",
                hero_sub: "An intellectual sanctuary for the modern mind. Bridging the gap between dry logic and blind faith.",
                cta_primary: "Enter the Sanctuary",
                cta_secondary: "Read Manifesto",
                calc_title: "Mind Noise Calculator",
                calc_q1: "Daily Screen Time (Hrs)",
                calc_q2: "Anxiety Level (1-10)",
                calc_result: "Your Cognitive Load",
                calc_rec: "Recommended Protocol",
                fomo_action: "joined the",
                fomo_item: "Inner Circle",
                footer_motto: "A Bridge for the Mind, A Boat for the Heart."
            },
            bn: {
                nav_manifesto: "ম্যানিফেস্টো",
                nav_academy: "একাডেমি",
                nav_store: "লাইব্রেরি",
                hero_title: "ভাবনায় যুক্তি,\nবিশ্বাসে মুক্তি।",
                hero_sub: "আধুনিক মনের জন্য একটি বুদ্ধিবৃত্তিক অভয়ারণ্য। শুষ্ক নাস্তিকতা এবং অন্ধ বিশ্বাসের মাঝখানের সেতু।",
                cta_primary: "অভয়ারণ্যে প্রবেশ করুন",
                cta_secondary: "ম্যানিফেস্টো পড়ুন",
                calc_title: "মানসিক অস্থিরতা পরিমাপক",
                calc_q1: "দৈনিক স্ক্রিন টাইম (ঘণ্টা)",
                calc_q2: "দুশ্চিন্তার মাত্রা (১-১০)",
                calc_result: "আপনার মানসিক চাপ",
                calc_rec: "পরামর্শ",
                fomo_action: "যুক্ত হয়েছেন",
                fomo_item: "ইনার সার্কেলে",
                footer_motto: "মনের জন্য সেতু, হৃদয়ের জন্য নৌকা।"
            }
        };

        const COURSES = [
            { id: 1, title: "Digital Stoicism", bn: "ডিজিটাল স্টোইসিজম", price: "৳1,200", type: "Flagship", icon: "Brain" },
            { id: 2, title: "The Art of Silence", bn: "নীরবতার শিল্প", price: "৳850", type: "Meditation", icon: "Moon" },
            { id: 3, title: "Critical Thinking 101", bn: "যুক্তি ও বিচার", price: "৳1,500", type: "Logic", icon: "Scale" },
        ];

        const RECENT_JOINS = ["Tanvir from Uttara", "Sarah from Gulshan", "Rifat from Sylhet", "Nadia from Chittagong", "Arafat from Mirpur"];

        // --- 2. SUB-COMPONENTS ---

        const Icon = ({ name, size = 24, className }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} width={size} height={size} className={className}></i>;
        };

        const Reveal = ({ children, delay = 0 }) => {
            const ref = useRef(null);
            const [isVisible, setIsVisible] = useState(false);

            useEffect(() => {
                const observer = new IntersectionObserver(([entry]) => {
                    if (entry.isIntersecting) setIsVisible(true);
                }, { threshold: 0.1 });
                if (ref.current) observer.observe(ref.current);
                return () => observer.disconnect();
            }, []);

            return (
                <div ref={ref} className={`transform transition-all duration-1000 ${isVisible ? 'translate-y-0 opacity-100' : 'translate-y-20 opacity-0'}`} style={{ transitionDelay: `${delay}ms` }}>
                    {children}
                </div>
            );
        };

        // --- 3. MAIN APPLICATION ---
        function HomeView() {
            const [lang, setLang] = useState('en');
            const [timeMode, setTimeMode] = useState('day');
            const [scrolled, setScrolled] = useState(false);
            const [screenTime, setScreenTime] = useState(6);
            const [anxiety, setAnxiety] = useState(5);
            const [fomo, setFomo] = useState(null);

            const T = TRANSLATIONS[lang];

            // Chrono-Logic & Scroll
            useEffect(() => {
                const updateTime = () => {
                    const hour = new Date().getHours();
                    setTimeMode((hour >= 6 && hour < 18) ? 'day' : 'night');
                };
                updateTime();

                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            // Persistence
            useEffect(() => {
                const savedLang = localStorage.getItem('vabuuk_lang');
                if (savedLang) setLang(savedLang);
            }, []);

            useEffect(() => {
                localStorage.setItem('vabuuk_lang', lang);
            }, [lang]);

            // FOMO Engine
            useEffect(() => {
                const interval = setInterval(() => {
                    const name = RECENT_JOINS[Math.floor(Math.random() * RECENT_JOINS.length)];
                    setFomo({ name, action: T.fomo_action, item: T.fomo_item });
                    setTimeout(() => setFomo(null), 6000);
                }, 20000);
                return () => clearInterval(interval);
            }, [lang, T]);

            // Calculator Logic
            const noiseScore = Math.min(100, (screenTime * 5) + (anxiety * 7));
            const getRecommendation = () => {
                if (noiseScore > 70) return lang === 'en' ? "Urgent Detox Required" : "জরুরি ডিটক্স প্রয়োজন";
                if (noiseScore > 40) return lang === 'en' ? "Practice Mindfulness" : "মাইন্ডফুলনেস চর্চা করুন";
                return lang === 'en' ? "Maintain Balance" : "ভারসাম্য বজায় রাখুন";
            };

            return (
                <div className={`min-h-screen relative overflow-x-hidden ${timeMode === 'night' ? 'bg-vabuuk-void text-vabuuk-paper' : 'bg-vabuuk-paper text-vabuuk-void'}`}>

                    {/* AMBIENT BACKGROUND */}
                    <div className="fixed inset-0 pointer-events-none z-0">
                        <div className={`absolute top-[-20%] left-[-10%] w-[50vw] h-[50vw] rounded-full blur-[120px] opacity-20 ${timeMode === 'night' ? 'bg-vabuuk-saffron' : 'bg-vabuuk-gold'}`}></div>
                        <div className="absolute bottom-[-20%] right-[-10%] w-[60vw] h-[60vw] rounded-full blur-[100px] opacity-10 bg-blue-900"></div>
                        {/* Noise Texture */}
                        <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")` }}></div>
                    </div>

                    {/* NAVIGATION */}
                    <nav className={`fixed top-0 w-full z-50 transition-all duration-500 ${scrolled ? (timeMode === 'night' ? 'glass-premium py-4' : 'glass-light py-4 shadow-sm') : 'py-8'}`}>
                        <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
                            <div className="flex items-center gap-3 cursor-pointer group">
                                <div className="w-10 h-10 bg-vabuuk-saffron text-white flex items-center justify-center rounded-sm font-serif font-bold text-xl group-hover:rotate-45 transition-transform duration-500">V</div>
                                <span className={`font-serif tracking-widest font-bold text-xl ${timeMode === 'night' ? 'text-white' : 'text-vabuuk-void'}`}>VABUUK</span>
                            </div>

                            <div className="hidden md:flex items-center gap-8 text-sm font-medium tracking-wide opacity-80">
                                <a href="#manifesto" className="hover:text-vabuuk-saffron transition">{T.nav_manifesto}</a>
                                <a href="#academy" className="hover:text-vabuuk-saffron transition">{T.nav_academy}</a>
                                <a href="#library" className="hover:text-vabuuk-saffron transition">{T.nav_store}</a>
                            </div>

                            <div className="flex items-center gap-4">
                                <button
                                    onClick={() => setLang(lang === 'en' ? 'bn' : 'en')}
                                    className={`px-4 py-1.5 rounded-full border text-xs font-bold uppercase transition hover:bg-vabuuk-saffron hover:text-white hover:border-transparent ${timeMode === 'night' ? 'border-white/20' : 'border-black/20'}`}
                                >
                                    {lang === 'en' ? 'বাং' : 'EN'}
                                </button>
                                <button className="bg-vabuuk-saffron hover:bg-vabuuk-saffron_dim text-white p-2 rounded-full shadow-[0_0_15px_rgba(217,119,6,0.5)] transition">
                                    <Icon name="user" size={18} />
                                </button>
                            </div>
                        </div>
                    </nav>

                    {/* HERO SECTION */}
                    <header className="relative min-h-screen flex flex-col justify-center items-center text-center px-4 z-10 pt-20">
                        <Reveal>
                            <div className="mb-6 flex justify-center">
                                <div className="h-16 w-px bg-vabuuk-saffron/50"></div>
                            </div>
                            <h1 className={`text-5xl md:text-7xl lg:text-8xl font-serif font-bold leading-[1.1] mb-8 ${lang === 'bn' ? 'font-bengali' : ''} ${timeMode === 'night' ? 'text-gradient-gold' : 'text-vabuuk-void'}`}>
                                {T.hero_title.split('\n').map((line, i) => (
                                    <span key={i} className="block">{line}</span>
                                ))}
                            </h1>
                            <p className={`max-w-2xl mx-auto text-lg md:text-xl font-light leading-relaxed mb-12 opacity-80 ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                {T.hero_sub}
                            </p>

                            <div className="flex flex-col md:flex-row gap-6 justify-center items-center">
                                <button className="group relative px-8 py-4 bg-vabuuk-saffron text-white rounded-none font-medium tracking-wider overflow-hidden">
                                    <div className="absolute inset-0 w-full h-full bg-white/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"></div>
                                    <span className="flex items-center gap-2">
                                        {T.cta_primary} <Icon name="arrow-right" size={16} />
                                    </span>
                                </button>
                                <button className={`flex items-center gap-2 hover:text-vabuuk-saffron transition-colors underline-offset-4 hover:underline ${timeMode === 'night' ? 'text-white' : 'text-vabuuk-void'}`}>
                                    {T.cta_secondary}
                                </button>
                            </div>
                        </Reveal>

                        {/* Scroll Indicator */}
                        <div className="absolute bottom-10 animate-bounce opacity-40">
                            <Icon name="chevron-down" size={32} />
                        </div>
                    </header>

                    {/* PHILOSOPHY GRID (The Bridge & Boat) */}
                    <section className={`py-24 px-6 relative z-10 ${timeMode === 'night' ? 'bg-vabuuk-void/50' : 'bg-white/50'}`}>
                        <div className="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 lg:gap-24 items-center">

                            {/* The Architect */}
                            <Reveal delay={100}>
                                <div className={`p-10 rounded-3xl border transition-all hover:border-vabuuk-saffron/50 group ${timeMode === 'night' ? 'glass-premium bg-slate-900/40' : 'glass-light bg-white/60'}`}>
                                    <div className="w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center text-vabuuk-saffron mb-8 group-hover:scale-110 transition-transform">
                                        <Icon name="triangle" size={32} />
                                    </div>
                                    <h3 className="text-3xl font-serif font-bold mb-4">The Architect</h3>
                                    <p className="opacity-70 leading-relaxed mb-6 font-light">
                                        Representing Logic, Structure, and Empirical Truth. We build rigorous frameworks to deconstruct myths and analyze reality without bias.
                                    </p>
                                    <div className="h-px w-full bg-current opacity-10"></div>
                                </div>
                            </Reveal>

                            {/* The Boatman */}
                            <Reveal delay={300}>
                                <div className={`p-10 rounded-3xl border transition-all hover:border-vabuuk-saffron/50 group ${timeMode === 'night' ? 'glass-premium bg-slate-900/40' : 'glass-light bg-white/60'}`}>
                                    <div className="w-16 h-16 bg-vabuuk-saffron/20 text-vabuuk-saffron rounded-full flex items-center justify-center mb-8 group-hover:scale-110 transition-transform">
                                        <Icon name="waves" size={32} />
                                    </div>
                                    <h3 className="text-3xl font-serif font-bold mb-4">The Boatman</h3>
                                    <p className="opacity-70 leading-relaxed mb-6 font-light">
                                        Representing Faith, Flow, and Intuitive Wisdom. We understand that logic has limits, and the human soul requires a vessel to navigate the unknown.
                                    </p>
                                    <div className="h-px w-full bg-current opacity-10"></div>
                                </div>
                            </Reveal>

                        </div>
                    </section>

                    {/* SMART WIDGET: Mind Noise Calculator */}
                    <section className="py-24 px-4 bg-vabuuk-saffron text-white relative overflow-hidden">
                        <div className="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                        <div className="max-w-4xl mx-auto relative z-10">
                            <Reveal>
                                <div className="text-center mb-12">
                                    <h2 className={`text-4xl font-serif font-bold mb-4 ${lang === 'bn' ? 'font-bengali' : ''}`}>{T.calc_title}</h2>
                                    <div className="w-24 h-1 bg-white mx-auto opacity-50"></div>
                                </div>

                                <div className="bg-black/20 backdrop-blur-xl p-8 md:p-12 rounded-3xl border border-white/10 flex flex-col md:flex-row gap-12 items-center">
                                    <div className="flex-1 w-full space-y-8">
                                        <div>
                                            <label className="block text-sm font-bold uppercase tracking-wider opacity-80 mb-4">{T.calc_q1}</label>
                                            <input
                                                type="range" min="0" max="16" step="1"
                                                value={screenTime} onChange={(e) => setScreenTime(parseInt(e.target.value))}
                                                className="w-full h-2 bg-white/30 rounded-lg appearance-none cursor-pointer accent-white"
                                            />
                                            <div className="flex justify-between mt-2 text-xs opacity-60 font-mono">
                                                <span>0 Hrs</span>
                                                <span className="text-xl font-bold text-white opacity-100">{screenTime} Hrs</span>
                                                <span>16+ Hrs</span>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-bold uppercase tracking-wider opacity-80 mb-4">{T.calc_q2}</label>
                                            <input
                                                type="range" min="1" max="10" step="1"
                                                value={anxiety} onChange={(e) => setAnxiety(parseInt(e.target.value))}
                                                className="w-full h-2 bg-white/30 rounded-lg appearance-none cursor-pointer accent-white"
                                            />
                                            <div className="flex justify-between mt-2 text-xs opacity-60 font-mono">
                                                <span>Calm</span>
                                                <span className="text-xl font-bold text-white opacity-100">{anxiety}/10</span>
                                                <span>Panic</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="md:w-px md:h-64 w-full h-px bg-white/20"></div>

                                    <div className="flex-1 text-center">
                                        <div className="w-40 h-40 mx-auto rounded-full border-4 border-white/30 flex items-center justify-center mb-6 relative">
                                            <div className="absolute inset-0 rounded-full border-4 border-white border-t-transparent animate-spin" style={{ animationDuration: '3s' }}></div>
                                            <div className="text-4xl font-bold font-serif">{noiseScore}%</div>
                                        </div>
                                        <div className="text-sm uppercase tracking-widest opacity-70 mb-1">{T.calc_result}</div>
                                        <div className={`text-2xl font-bold font-serif ${lang === 'bn' ? 'font-bengali' : ''}`}>{getRecommendation()}</div>

                                        <button className="mt-8 px-6 py-2 border border-white rounded-full hover:bg-white hover:text-vabuuk-saffron transition text-sm font-bold uppercase">
                                            View Report
                                        </button>
                                    </div>
                                </div>
                            </Reveal>
                        </div>
                    </section>

                    {/* ACADEMY / STORE */}
                    <section className={`py-24 px-6 relative z-10 ${timeMode === 'night' ? 'bg-vabuuk-void' : 'bg-vabuuk-paper'}`}>
                        <div className="max-w-7xl mx-auto">
                            <div className="flex justify-between items-end mb-16">
                                <div>
                                    <h2 className="text-4xl font-serif font-bold mb-2">The Academy</h2>
                                    <p className="opacity-60">Curated paths for the intellectual soul.</p>
                                </div>
                                <button className="hidden md:flex items-center gap-2 text-vabuuk-saffron font-bold hover:underline">
                                    View All Courses <Icon name="arrow-up-right" size={16} />
                                </button>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                {COURSES.map((course, i) => (
                                    <Reveal key={course.id} delay={i * 150}>
                                        <div className={`group relative p-8 rounded-2xl border transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl ${timeMode === 'night' ? 'border-white/10 hover:border-vabuuk-saffron/40 bg-slate-900/50' : 'border-black/5 hover:border-vabuuk-saffron/40 bg-white'}`}>
                                            <div className="absolute top-6 right-6 opacity-20 group-hover:opacity-100 group-hover:text-vabuuk-saffron transition-all">
                                                <Icon name={course.icon} size={32} />
                                            </div>
                                            <div className="text-xs font-bold uppercase tracking-widest text-vabuuk-saffron mb-4">{course.type}</div>
                                            <h3 className={`text-2xl font-serif font-bold mb-2 ${lang === 'bn' ? 'font-bengali' : ''}`}>
                                                {lang === 'en' ? course.title : course.bn}
                                            </h3>
                                            <div className="text-lg font-bold opacity-70 mb-6">{course.price}</div>
                                            <button className="w-full py-3 rounded-lg border border-current opacity-60 hover:opacity-100 hover:bg-vabuuk-saffron hover:border-transparent hover:text-white transition flex items-center justify-center gap-2">
                                                Enroll Now
                                            </button>
                                        </div>
                                    </Reveal>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* FOOTER */}
                    <footer className={`py-12 border-t text-center relative z-10 ${timeMode === 'night' ? 'border-white/10 bg-black/40' : 'border-black/5 bg-stone-200/50'}`}>
                        <div className="w-12 h-12 bg-vabuuk-saffron mx-auto rounded-full flex items-center justify-center text-white font-serif font-bold text-2xl mb-6">V</div>
                        <p className={`text-lg font-serif italic opacity-70 mb-8 ${lang === 'bn' ? 'font-bengali' : ''}`}>"{T.footer_motto}"</p>

                        <div className="flex justify-center gap-6 opacity-50 mb-8">
                            <Icon name="youtube" className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition" />
                            <Icon name="facebook" className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition" />
                            <Icon name="instagram" className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition" />
                            <Icon name="linkedin" className="hover:text-vabuuk-saffron hover:opacity-100 cursor-pointer transition" />
                        </div>
                        <p className="text-xs opacity-30 tracking-widest uppercase">&copy; 2026 VABUUK Nexus. Dhaka, Bangladesh.</p>
                    </footer>

                    {/* FOMO NOTIFICATION */}
                    {fomo && (
                        <div className="fixed bottom-6 left-6 z-50 animate-fade-in-up pointer-events-none">
                            <div className={`px-5 py-4 rounded-xl shadow-2xl flex items-center gap-4 border backdrop-blur-xl transition-all duration-500 ${timeMode === 'night' ? 'bg-slate-900/80 border-white/10 text-white shadow-vabuuk-saffron/20' : 'bg-white/90 border-black/5 text-slate-900 shadow-xl'}`}>
                                <div className="relative flex items-center justify-center">
                                    <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                    <span className="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"></span>
                                </div>
                                <div>
                                    <p className="text-xs font-bold font-serif tracking-wide">{fomo.name}</p>
                                    <p className="text-[10px] opacity-60 font-mono uppercase tracking-wider">{fomo.action} <span className="text-vabuuk-saffron font-bold">{fomo.item}</span></p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* WHATSAPP CTA */}
                    <a href="https://wa.me/8801700000000" target="_blank" rel="noopener noreferrer" className="fixed bottom-6 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-transform duration-300 group">
                        <Icon name="message-circle" size={28} />
                        <span className="absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap transition">Chat with Architect</span>
                    </a>

                </div>
            );
        }

        
// --- Micro Router: #home | #manifesto | #academy | #library ---
function RootApp(){
  const { useState, useEffect } = React;
  const [route,setRoute] = useState((window.location.hash||'#home').slice(1));
  useEffect(()=>{
    const onHash = ()=> setRoute((window.location.hash||'#home').slice(1));
    window.addEventListener('hashchange', onHash);
    return ()=> window.removeEventListener('hashchange', onHash);
  },[]);
  const TITLES = { home: 'VABUUK — Sanctuary', manifesto: 'VABUUK — Manifesto', academy: 'VABUUK — Academy', library: 'VABUUK — Library' };
  useEffect(()=>{ const base='Reason in Thought, Freedom in Belief'; document.title = (TITLES[route] ? `${TITLES[route]} | ${base}` : `VABUUK | ${base}`); }, [route]);
  const View = route==='home' ? HomeView : route==='manifesto' ? (window.ManifestoView||HomeView) : route==='academy' ? (window.AcademyView||HomeView) : route==='library' ? (window.LibraryView||HomeView) : HomeView;
  return React.createElement(View);
}
// File-link to hash mapping
document.addEventListener('click', (e)=>{ const a=e.target.closest('a[href]'); if(!a) return; const href=a.getAttribute('href')||''; const map=[['academy.html','#academy'],['manifesto.html','#manifesto'],['library.html','#library'],['index.html','#home']]; for(const [pat,hash] of map){ if(href.includes(pat)){ e.preventDefault(); window.location.hash=hash; break; } } });
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(RootApp));

</script>
</body>
</html>
